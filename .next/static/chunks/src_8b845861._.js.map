{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/phucnb/Downloads/kikiPodcast/gen_podcast_v2/frontend/src/lib/constants/speakers.ts"],"sourcesContent":["import { SpeakerProfile } from '@/types/podcast';\n\nexport const SPEAKER_PROFILES: SpeakerProfile[] = [\n  {\n    id: 0,\n    name: \"Mai Lan\",\n    gender: \"Female\",\n    age: 20,\n    mc_guidelines: \"+ Explanatory \\n+ Comparative\\n+ Reflective\",\n    speed: 1.0 // Default speed\n  },\n  {\n    id: 1,\n    name: \"Minh Tú\",\n    gender: \"Male\",\n    age: 30,\n    mc_guidelines: \"+ Formal \\n+ Informative \\n+ Descriptive \\n+ Objective\",\n    speed: 1.0 // Default speed\n  }\n];\n"],"names":[],"mappings":";;;AAEO,MAAM,mBAAqC;IAChD;QACE,IAAI;QACJ,MAAM;QACN,QAAQ;QACR,KAAK;QACL,eAAe;QACf,OAAO,IAAI,gBAAgB;IAC7B;IACA;QACE,IAAI;QACJ,MAAM;QACN,QAAQ;QACR,KAAK;QACL,eAAe;QACf,OAAO,IAAI,gBAAgB;IAC7B;CACD","debugId":null}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///home/phucnb/Downloads/kikiPodcast/gen_podcast_v2/frontend/src/components/podcast/SpeedSettingsModal.tsx"],"sourcesContent":["'use client';\n\nimport React, { useRef, useEffect, useState } from 'react';\nimport { SpeakerProfile } from '@/types/podcast';\n\ninterface SpeedSettingsModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  speakers: SpeakerProfile[];\n  speakerSpeeds: { [speakerId: number]: number };\n  onSpeedChange: (speakerId: number, speed: number) => void;\n}\n\nexport default function SpeedSettingsModal({ \n  isOpen, \n  onClose, \n  speakers, \n  speakerSpeeds, \n  onSpeedChange \n}: SpeedSettingsModalProps) {\n  const modalRef = useRef<HTMLDivElement>(null);\n  const [demoLoading, setDemoLoading] = useState<{ [speakerId: number]: boolean }>({});\n  const [demoAudio, setDemoAudio] = useState<{ [speakerId: number]: string }>({});\n  const audioRefs = useRef<{ [speakerId: number]: HTMLAudioElement | null }>({});\n  \n  // Demo text for generating audio samples\n  const demoText = \"Sau gần một tháng mở cổng đăng kí, cuộc thi sáng kiến khoa học 2025 thu hút hơn 30 hồ sơ tham dự, trong đó nhiều giải pháp về năng lượng, chất thải, sử dụng tài nguyên sẵn có\";\n  \n  // Handle click outside to close modal\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (modalRef.current && !modalRef.current.contains(event.target as Node)) {\n        onClose();\n      }\n    }\n    \n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n      // Prevent scrolling of the body when modal is open\n      document.body.style.overflow = 'hidden';\n    }\n    \n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n      document.body.style.overflow = 'auto';\n    };\n  }, [isOpen, onClose]);\n  \n  // Handle escape key to close modal\n  useEffect(() => {\n    function handleEscapeKey(event: KeyboardEvent) {\n      if (event.key === 'Escape') {\n        onClose();\n      }\n    }\n    \n    if (isOpen) {\n      document.addEventListener('keydown', handleEscapeKey);\n    }\n    \n    return () => {\n      document.removeEventListener('keydown', handleEscapeKey);\n    };\n  }, [isOpen, onClose]);\n\n  // Reset audio state on modal close\n  useEffect(() => {\n    if (!isOpen) {\n      // Stop all playing audio when modal closes\n      Object.values(audioRefs.current).forEach(audioEl => {\n        if (audioEl) {\n          audioEl.pause();\n          audioEl.currentTime = 0;\n        }\n      });\n    }\n  }, [isOpen]);\n  \n  // Function to generate demo audio with current speed\n  const generateDemoAudio = async (speakerId: number, speed: number) => {\n    // Don't generate if already loading\n    if (demoLoading[speakerId]) return;\n    \n    try {\n      // Find speaker profile to determine speaker ID for TTS\n      const speaker = speakers.find(s => s.id === speakerId);\n      if (!speaker) return;\n      \n      const ttsSpeakerId = speaker.gender === 'Female' ? 1 : 2;\n      \n      // Set loading state for this speaker\n      setDemoLoading(prev => ({ ...prev, [speakerId]: true }));\n      \n      // Make request to TTS API\n      const response = await fetch('https://kiki-tts-engine.tts.zalo.ai/generate_audio', {\n        method: 'POST',\n        headers: {\n          'accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          text: demoText,\n          speed: speed,\n          speaker_id: ttsSpeakerId,\n          encode_type: 0\n        })\n      });\n      \n      if (!response.ok) {\n        throw new Error(`API responded with status: ${response.status}`);\n      }\n      \n      const result = await response.json();\n      \n      if (result.error_code === 0 && result.url) {\n        // Set the audio URL\n        setDemoAudio(prev => ({ ...prev, [speakerId]: result.url }));\n      } else {\n        throw new Error(`API error: ${result.error_message || 'Unknown error'}`);\n      }\n    } catch (error) {\n      console.error('Error generating demo audio:', error);\n      // Show error message to user\n      alert('Could not generate demo audio. Please try again later.');\n    } finally {\n      // Clear loading state\n      setDemoLoading(prev => ({ ...prev, [speakerId]: false }));\n    }\n  };\n\n  // Handle playing demo audio\n  const playDemoAudio = (speakerId: number) => {\n    const audioEl = audioRefs.current[speakerId];\n    if (audioEl) {\n      // If we already have an audio element, just play it\n      audioEl.play().catch(err => console.error('Error playing audio:', err));\n    } else if (demoAudio[speakerId]) {\n      // If we have a URL but no element yet, create one and play it\n      const newAudio = new Audio(demoAudio[speakerId]);\n      audioRefs.current[speakerId] = newAudio;\n      newAudio.play().catch(err => console.error('Error playing audio:', err));\n    } else {\n      // If we don't have a URL yet, generate one first\n      generateDemoAudio(speakerId, speakerSpeeds[speakerId] || 1.0);\n    }\n  };\n  \n  // Handle reset for a speaker\n  const handleReset = (e: React.MouseEvent, speakerId: number) => {\n    e.preventDefault();\n    e.stopPropagation();\n    onSpeedChange(speakerId, 1.0);\n    \n    // Clear existing demo audio for this speaker\n    setDemoAudio(prev => {\n      const newState = { ...prev };\n      delete newState[speakerId];\n      return newState;\n    });\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\n      <div \n        ref={modalRef}\n        className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-md w-full p-6 max-h-[90vh] overflow-y-auto\"\n      >\n        <div className=\"flex justify-between items-center mb-6\">\n          <h3 className=\"text-xl font-bold text-gray-900 dark:text-white\">\n            Voice Speed Settings\n          </h3>\n          <button\n            onClick={onClose}\n            type=\"button\"\n            className=\"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300\"\n          >\n            <svg className=\"h-6 w-6\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n        \n        <div className=\"space-y-6\">\n          {speakers.map((speaker) => (\n            <div key={speaker.id} className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n              <div className=\"flex items-center mb-4\">\n                <div className={`w-10 h-10 rounded-full flex items-center justify-center mr-3 ${\n                  speaker.gender === 'Female' ? 'bg-pink-100 text-pink-600 dark:bg-pink-900/30 dark:text-pink-400' : 'bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400'\n                }`}>\n                  {speaker.gender === 'Female' ? (\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                    </svg>\n                  ) : (\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n                    </svg>\n                  )}\n                </div>\n                <div>\n                  <h4 className=\"font-medium text-gray-900 dark:text-white\">{speaker.name}</h4>\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">{speaker.gender}</p>\n                </div>\n              </div>\n              \n              <div className=\"space-y-4\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                    Voice Speed: {(speakerSpeeds[speaker.id] || 1.0).toFixed(1)}x\n                  </span>\n                  <button\n                    onClick={(e) => handleReset(e, speaker.id)}\n                    type=\"button\"\n                    className=\"text-xs text-blue-600 dark:text-blue-400 hover:underline\"\n                  >\n                    Reset to 1.0x\n                  </button>\n                </div>\n                \n                <input\n                  type=\"range\"\n                  min=\"0.5\"\n                  max=\"1.5\"\n                  step=\"0.1\"\n                  value={speakerSpeeds[speaker.id] || 1.0}\n                  onChange={(e) => {\n                    const newSpeed = parseFloat(e.target.value);\n                    onSpeedChange(speaker.id, newSpeed);\n                    // Clear existing demo audio when speed changes\n                    setDemoAudio(prev => {\n                      const newState = { ...prev };\n                      delete newState[speaker.id];\n                      return newState;\n                    });\n                  }}\n                  className=\"w-full h-2 rounded-lg appearance-none cursor-pointer bg-gray-200 dark:bg-gray-700\"\n                  style={{\n                    background: `linear-gradient(to right, #3B82F6 0%, #3B82F6 ${(((speakerSpeeds[speaker.id] || 1.0) - 0.5) / 1) * 100}%, #E5E7EB ${(((speakerSpeeds[speaker.id] || 1.0) - 0.5) / 1) * 100}%, #E5E7EB 100%)`\n                  }}\n                />\n                \n                <div className=\"flex justify-between text-xs text-gray-500 dark:text-gray-400\">\n                  <span>Slower (0.5x)</span>\n                  <span>Normal (1.0x)</span>\n                  <span>Faster (1.5x)</span>\n                </div>\n                \n                <div className=\"flex justify-center space-x-2 pt-2\">\n                  {[0.5, 0.7, 1.0, 1.2, 1.5].map((speed) => (\n                    <button\n                      key={speed}\n                      type=\"button\"\n                      onClick={() => onSpeedChange(speaker.id, speed)}\n                      className={`px-2 py-1 text-xs rounded-md ${\n                        (speakerSpeeds[speaker.id] || 1.0) === speed\n                          ? 'bg-blue-600 text-white'\n                          : 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\n                      }`}\n                    >\n                      {speed.toFixed(1)}x\n                    </button>\n                  ))}\n                </div>\n                \n                {/* Demo Audio Button */}\n                <div className=\"flex justify-center mt-4\">\n                  <button\n                    type=\"button\"\n                    onClick={() => playDemoAudio(speaker.id)}\n                    disabled={demoLoading[speaker.id]}\n                    className={`flex items-center rounded-md px-4 py-2 text-sm font-medium ${\n                      demoLoading[speaker.id]\n                        ? 'bg-gray-300 text-gray-500 dark:bg-gray-700 dark:text-gray-400 cursor-not-allowed'\n                        : 'bg-blue-100 text-blue-700 hover:bg-blue-200 dark:bg-blue-900/30 dark:text-blue-400 dark:hover:bg-blue-800/50'\n                    }`}\n                  >\n                    {demoLoading[speaker.id] ? (\n                      <>\n                        <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-gray-500 dark:text-gray-400\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                          <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                          <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                        </svg>\n                        Generating Demo...\n                      </>\n                    ) : (\n                      <>\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 mr-1.5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z\" />\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                        </svg>\n                        {demoAudio[speaker.id] ? 'Play' : 'Generate Demo'}\n                      </>\n                    )}\n                  </button>\n                </div>\n                \n                {/* Hidden audio elements for demo playback */}\n                {demoAudio[speaker.id] && (\n                  <audio\n                    src={demoAudio[speaker.id]}\n                    ref={(el) => { audioRefs.current[speaker.id] = el; }}\n                    className=\"hidden\"\n                  />\n                )}\n              </div>\n            </div>\n          ))}\n        </div>\n        \n        <div className=\"mt-6 flex justify-end space-x-3\">\n          <button\n            type=\"button\"\n            onClick={() => {\n              // Reset all speakers to 1.0\n              speakers.forEach(speaker => onSpeedChange(speaker.id, 1.0));\n              // Clear all demo audio\n              setDemoAudio({});\n            }}\n            className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600\"\n          >\n            Reset All\n          </button>\n          <button\n            type=\"button\"\n            onClick={onClose}\n            className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n          >\n            Done\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 636, "column": 0}, "map": {"version":3,"sources":["file:///home/phucnb/Downloads/kikiPodcast/gen_podcast_v2/frontend/src/components/podcast/SpeakerSelection.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { SPEAKER_PROFILES } from '@/lib/constants/speakers';\n\n// Import the modal component instead of SpeedControl\nimport SpeedSettingsModal from './SpeedSettingsModal';\n\n// Helper function to convert numeric age to description\nconst getAgeDescription = (age: number): string => {\n  if (age < 25) return 'Young';\n  if (age < 45) return 'Middle-aged';\n  return 'Mature';\n};\n\n// Updated interface with speed-related props\ninterface SpeakerSelectionProps {\n  selectedSpeakers: number[];\n  speakerSpeeds: { [speakerId: number]: number }; // Added this prop\n  onChange: (selectedIds: number[]) => void;\n  onSpeedChange: (speakerId: number, speed: number) => void; // Added this prop\n}\n\nexport default function SpeakerSelection({ \n  selectedSpeakers, \n  speakerSpeeds, // Added this prop\n  onChange,\n  onSpeedChange // Added this prop\n}: SpeakerSelectionProps) {\n  const [hostMenuOpen, setHostMenuOpen] = useState(false);\n  const [guestMenuOpen, setGuestMenuOpen] = useState(false);\n  const [isSpeedModalOpen, setIsSpeedModalOpen] = useState(false);\n  \n  const hostSpeaker = selectedSpeakers[0] !== undefined ? SPEAKER_PROFILES.find(s => s.id === selectedSpeakers[0]) : null;\n  const guestSpeaker = selectedSpeakers[1] !== undefined ? SPEAKER_PROFILES.find(s => s.id === selectedSpeakers[1]) : null;\n  \n  // Get selected speakers as profiles\n  const selectedSpeakerProfiles = SPEAKER_PROFILES.filter(\n    speaker => selectedSpeakers.includes(speaker.id)\n  );\n\n  const selectHost = (speakerId: number) => {\n    const newSelection = [...selectedSpeakers];\n    \n    // If this speaker is already selected as guest, reset guest\n    if (selectedSpeakers[1] === speakerId) {\n      newSelection[1] = undefined; // Reset guest selection\n    }\n    \n    newSelection[0] = speakerId;\n    onChange(newSelection);\n    setHostMenuOpen(false);\n  };\n\n  const selectGuest = (speakerId: number) => {\n    const newSelection = [...selectedSpeakers];\n    newSelection[1] = speakerId;\n    onChange(newSelection);\n    setGuestMenuOpen(false);\n  };\n\n  const playAudio = (speakerId: number, e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    const audio = new Audio(`/voices/${speakerId}_sample.wav`);\n    audio.play().catch(err => console.error(\"Error playing audio:\", err));\n  };\n\n  // Extract style tags from guidelines string\n  const getStyleTags = (guidelines: string): string[] => {\n    return guidelines.split('+')\n      .map(item => item.trim())\n      .filter(item => item.length > 0);\n  };\n\n  return (\n    <div className=\"mb-6\">\n      <div className=\"flex justify-between items-center mb-4\">\n        <h3 className=\"font-medium text-gray-800 dark:text-gray-200 text-lg flex items-center\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 mr-2 text-blue-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n          </svg>\n          Voice Selection\n        </h3>\n        \n        {/* Speed Settings Button */}\n        {(hostSpeaker || guestSpeaker) && (\n          <button\n            onClick={() => setIsSpeedModalOpen(true)}\n            type=\"button\"\n            className=\"inline-flex items-center px-3 py-1.5 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 mr-1.5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4\" />\n            </svg>\n            Advanced Settings\n          </button>\n        )}\n      </div>\n      \n      {/* Speed Settings Modal */}\n      <SpeedSettingsModal \n        isOpen={isSpeedModalOpen}\n        onClose={() => setIsSpeedModalOpen(false)}\n        speakers={selectedSpeakerProfiles}\n        speakerSpeeds={speakerSpeeds}\n        onSpeedChange={onSpeedChange}\n      />\n      \n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {/* Host Voice Selection */}\n        <div className=\"relative\">\n          <label className=\"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300\">Host Voice</label>\n          <div \n            className=\"border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 p-3 flex items-center justify-between cursor-pointer\"\n            onClick={() => setHostMenuOpen(!hostMenuOpen)}\n          >\n            {hostSpeaker ? (\n              <div className=\"flex items-center\">\n                <div className={`w-8 h-8 rounded-full flex items-center justify-center mr-2 ${\n                  hostSpeaker.gender === 'Female' ? 'bg-pink-100 text-pink-600' : 'bg-blue-100 text-blue-600'\n                }`}>\n                  {hostSpeaker.gender === 'Female' ? (\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                    </svg>\n                  ) : (\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n                    </svg>\n                  )}\n                </div>\n                <div>\n                  <span className=\"font-medium\">{hostSpeaker.name}</span>\n                  <div className=\"flex mt-1 gap-1\">\n                    <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300\">\n                      {hostSpeaker.gender}\n                    </span>\n                    <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300\">\n                      {getAgeDescription(hostSpeaker.age)}\n                    </span>\n                    <button \n                      className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300 hover:bg-blue-200 transition-colors\"\n                      onClick={(e) => playAudio(hostSpeaker.id, e)}\n                      type=\"button\"\n                    >\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-3 w-3 mr-1\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z\" />\n                      </svg>\n                      Play\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <span className=\"text-gray-500\">Select host voice</span>\n            )}\n            <svg className=\"w-5 h-5 text-gray-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fillRule=\"evenodd\" d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\" clipRule=\"evenodd\"></path>\n            </svg>\n          </div>\n          \n          {/* Host Dropdown */}\n          {hostMenuOpen && (\n            <div className=\"absolute z-10 mt-1 w-full bg-white dark:bg-gray-800 shadow-lg rounded-lg border border-gray-200 dark:border-gray-700 max-h-60 overflow-auto\">\n              {SPEAKER_PROFILES.map(speaker => {\n                const styleTags = getStyleTags(speaker.mc_guidelines);\n                // Host can select any voice, no restrictions\n                return (\n                  <div \n                    key={speaker.id}\n                    className=\"p-3 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer\"\n                    onClick={() => selectHost(speaker.id)}\n                  >\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center\">\n                        <div className={`w-8 h-8 rounded-full flex items-center justify-center mr-2 ${\n                          speaker.gender === 'Female' ? 'bg-pink-100 text-pink-600' : 'bg-blue-100 text-blue-600'\n                        }`}>\n                          {speaker.gender === 'Female' ? (\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                            </svg>\n                          ) : (\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n                            </svg>\n                          )}\n                        </div>\n                        <div className=\"flex-1\">\n                          <p className=\"font-medium\">{speaker.name}</p>\n                          <div className=\"flex items-center gap-1 mt-1\">\n                            <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300\">\n                              {speaker.gender}\n                            </span>\n                            <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300\">\n                              {getAgeDescription(speaker.age)}\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n                      <button \n                        className=\"text-blue-600 hover:text-blue-800 transition-colors p-1\"\n                        onClick={(e) => playAudio(speaker.id, e)}\n                        type=\"button\"\n                      >\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z\" />\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                        </svg>\n                      </button>\n                    </div>\n                    \n                    <div className=\"flex flex-wrap gap-1 mt-2\">\n                      {styleTags.map((tag, idx) => (\n                        <span key={idx} className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300\">\n                          {tag}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          )}\n          \n          {/* Display current speed value instead of full speed control */}\n          {hostSpeaker && (\n            <div className=\"mt-3 text-sm text-gray-600 dark:text-gray-400 flex items-center justify-between px-1\">\n              <span>Voice speed: <span className=\"font-medium\">{(speakerSpeeds[hostSpeaker.id] || 1.0).toFixed(1)}x</span></span>\n\n            </div>\n          )}\n        </div>\n        \n        {/* Guest Voice Selection */}\n        <div className=\"relative\">\n          <label className=\"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300\">Guest Voice</label>\n          <div \n            className=\"border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 p-3 flex items-center justify-between cursor-pointer\"\n            onClick={() => setGuestMenuOpen(!guestMenuOpen)}\n          >\n            {guestSpeaker ? (\n              <div className=\"flex items-center\">\n                <div className={`w-8 h-8 rounded-full flex items-center justify-center mr-2 ${\n                  guestSpeaker.gender === 'Female' ? 'bg-pink-100 text-pink-600' : 'bg-blue-100 text-blue-600'\n                }`}>\n                  {guestSpeaker.gender === 'Female' ? (\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                    </svg>\n                  ) : (\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n                    </svg>\n                  )}\n                </div>\n                <div>\n                  <span className=\"font-medium\">{guestSpeaker.name}</span>\n                  <div className=\"flex mt-1 gap-1\">\n                    <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300\">\n                      {guestSpeaker.gender}\n                    </span>\n                    <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300\">\n                      {getAgeDescription(guestSpeaker.age)}\n                    </span>\n                    <button \n                      className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300 hover:bg-blue-200 transition-colors\"\n                      onClick={(e) => playAudio(guestSpeaker.id, e)}\n                      type=\"button\"\n                    >\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-3 w-3 mr-1\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z\" />\n                      </svg>\n                      Play\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <span className=\"text-gray-500\">Select guest voice</span>\n            )}\n            <svg className=\"w-5 h-5 text-gray-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fillRule=\"evenodd\" d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\" clipRule=\"evenodd\"></path>\n            </svg>\n          </div>\n          \n          {/* Guest Dropdown */}\n          {guestMenuOpen && (\n            <div className=\"absolute z-10 mt-1 w-full bg-white dark:bg-gray-800 shadow-lg rounded-lg border border-gray-200 dark:border-gray-700 max-h-60 overflow-auto\">\n              {SPEAKER_PROFILES.map(speaker => {\n                const styleTags = getStyleTags(speaker.mc_guidelines);\n                const isDisabled = selectedSpeakers[0] === speaker.id;\n                \n                return (\n                  <div \n                    key={speaker.id}\n                    className={`p-3 ${isDisabled ? 'bg-gray-50 dark:bg-gray-900 opacity-60' : 'hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer'}`}\n                    onClick={() => !isDisabled && selectGuest(speaker.id)}\n                  >\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center\">\n                        <div className={`w-8 h-8 rounded-full flex items-center justify-center mr-2 ${\n                          speaker.gender === 'Female' ? 'bg-pink-100 text-pink-600' : 'bg-blue-100 text-blue-600'\n                        }`}>\n                          {speaker.gender === 'Female' ? (\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                            </svg>\n                          ) : (\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n                            </svg>\n                          )}\n                        </div>\n                        <div className=\"flex-1\">\n                          <p className=\"font-medium\">{speaker.name}</p>\n                          <div className=\"flex items-center gap-1 mt-1\">\n                            <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300\">\n                              {speaker.gender}\n                            </span>\n                            <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300\">\n                              {getAgeDescription(speaker.age)}\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n                      <button \n                        className=\"text-blue-600 hover:text-blue-800 transition-colors p-1\"\n                        onClick={(e) => playAudio(speaker.id, e)}\n                        type=\"button\"\n                      >\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z\" />\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                        </svg>\n                      </button>\n                    </div>\n                    \n                    <div className=\"flex flex-wrap gap-1 mt-2\">\n                      {styleTags.map((tag, idx) => (\n                        <span key={idx} className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300\">\n                          {tag}\n                        </span>\n                      ))}\n                    </div>\n                    \n                    {isDisabled && (\n                      <div className=\"mt-1 text-xs italic text-gray-500 dark:text-gray-400\">\n                        Already selected as host\n                      </div>\n                    )}\n                  </div>\n                );\n              })}\n            </div>\n          )}\n          \n          {/* Display current speed value instead of full speed control */}\n          {guestSpeaker && (\n            <div className=\"mt-3 text-sm text-gray-600 dark:text-gray-400 flex items-center justify-between px-1\">\n              <span>Voice speed: <span className=\"font-medium\">{(speakerSpeeds[guestSpeaker.id] || 1.0).toFixed(1)}x</span></span>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1612, "column": 0}, "map": {"version":3,"sources":["file:///home/phucnb/Downloads/kikiPodcast/gen_podcast_v2/frontend/src/components/podcast/PodcastStyleSelector.tsx"],"sourcesContent":["// src/components/podcast/PodcastStyleSelector.tsx\n'use client';\n\nimport { useState, useEffect } from 'react';\n\n// Style presets that combine format and quality\nexport const PODCAST_STYLES = [\n  {\n    id: 'traditional-news',\n    name: 'Traditional News',\n    description: 'Maintain neutral perspectives while providing information',\n    podcastType: 'Alternating Briefing',\n    duration: 'Short',\n    maxRevisions: 2,\n    guidelines: 'Luân phiên giữa các người dẫn cho các tin tức theo cách ngắn gọn khách quan'\n  },\n  {\n    id: 'casual-balanced',\n    name: 'Interactive Discussion',\n    description: 'Conversational, natural dialogue with follow-up questions to deepen the conversation',\n    podcastType: 'Discussion',\n    duration: 'Medium',\n    maxRevisions: 3,\n    guidelines: 'Đối thoại tự nhiên, đặt câu hỏi để mở rộng và đào sâu cuộc trò chuyện'\n  },\n  {\n    id: 'quick-brief',\n    name: 'Quick Briefing',\n    description: 'Fast-paced essential information',\n    podcastType: 'Solo Briefing',\n    duration: 'Very Short',\n    maxRevisions: 1,\n    guidelines: 'Tập trung vào thông tin chính yếu, sử dụng ngôn ngữ đơn giản, rõ ràng'\n  },\n  {\n    id: 'custom',\n    name: 'Custom Style',\n    description: 'Fully customized podcast settings',\n    podcastType: 'Discussion',\n    duration: 'Medium',\n    maxRevisions: 2,\n    guidelines: ''\n  },\n];\n\ninterface PodcastStyleSelectorProps {\n  onStyleChange: (style: {\n    podcastType: string;\n    duration: string;\n    guidelines: string;\n    maxRevisions: number;\n  }) => void;\n}\n\nexport default function PodcastStyleSelector({ onStyleChange }: PodcastStyleSelectorProps) {\n  const [selectedStyleId, setSelectedStyleId] = useState('casual-balanced');\n  const [isStyleMenuOpen, setIsStyleMenuOpen] = useState(false);\n  const [customGuidelines, setCustomGuidelines] = useState(PODCAST_STYLES[1].guidelines); // Set default to Interactive Discussion guidelines\n  const [customPodcastType, setCustomPodcastType] = useState(PODCAST_STYLES[1].podcastType);\n  const [customDuration, setCustomDuration] = useState(PODCAST_STYLES[1].duration);\n  const [customMaxRevisions, setCustomMaxRevisions] = useState(PODCAST_STYLES[1].maxRevisions);\n  \n  // Initialize with the default selected style when component mounts\n  useEffect(() => {\n    const style = PODCAST_STYLES.find(s => s.id === selectedStyleId);\n    if (style) {\n      setCustomGuidelines(style.guidelines);\n      setCustomPodcastType(style.podcastType);\n      setCustomDuration(style.duration);\n      setCustomMaxRevisions(style.maxRevisions);\n      \n      // Notify parent component about initial style\n      onStyleChange({\n        podcastType: style.podcastType,\n        duration: style.duration,\n        guidelines: style.guidelines,\n        maxRevisions: style.maxRevisions\n      });\n    }\n  }, []);\n  \n  // Get the selected style template\n  const selectedStyle = PODCAST_STYLES.find(style => style.id === selectedStyleId) || PODCAST_STYLES[1];\n  \n  // Create the actual style with potentially customized values\n  const currentStyle = {\n    ...selectedStyle,\n    guidelines: customGuidelines,\n    podcastType: customPodcastType,\n    duration: customDuration,\n    maxRevisions: customMaxRevisions\n  };\n\n  const handleStyleSelect = (styleId: string) => {\n    setSelectedStyleId(styleId);\n    const style = PODCAST_STYLES.find(s => s.id === styleId);\n    if (style) {\n      // Set initial values for the new style\n      setCustomGuidelines(style.guidelines);\n      setCustomPodcastType(style.podcastType);\n      setCustomDuration(style.duration);\n      setCustomMaxRevisions(style.maxRevisions);\n      \n      // Pass these values to the parent component\n      onStyleChange({\n        podcastType: style.podcastType,\n        duration: style.duration,\n        guidelines: style.guidelines,\n        maxRevisions: style.maxRevisions\n      });\n    }\n    \n    setIsStyleMenuOpen(false);\n  };\n\n  const handleCustomGuidelinesChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setCustomGuidelines(e.target.value);\n    onStyleChange({\n      podcastType: customPodcastType,\n      duration: customDuration,\n      guidelines: e.target.value,\n      maxRevisions: customMaxRevisions\n    });\n  };\n\n  const handleCustomPodcastTypeChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\n    setCustomPodcastType(e.target.value);\n    onStyleChange({\n      podcastType: e.target.value,\n      duration: customDuration,\n      guidelines: customGuidelines,\n      maxRevisions: customMaxRevisions\n    });\n  };\n\n  const handleCustomDurationChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\n    setCustomDuration(e.target.value);\n    onStyleChange({\n      podcastType: customPodcastType,\n      duration: e.target.value,\n      guidelines: customGuidelines,\n      maxRevisions: customMaxRevisions\n    });\n  };\n\n  const handleMaxRevisionsChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\n    const revisions = parseInt(e.target.value);\n    setCustomMaxRevisions(revisions);\n    onStyleChange({\n      podcastType: customPodcastType,\n      duration: customDuration,\n      guidelines: customGuidelines,\n      maxRevisions: revisions\n    });\n  };\n\n  // Helper to get quality level text from max revisions\n  const getQualityLevel = (revisions: number): string => {\n    switch(revisions) {\n      case 1: return 'Fast';\n      case 3: return 'High Quality';\n      default: return 'Balanced';\n    }\n  };\n\n  return (\n    <div className=\"mb-6\">\n      <label className=\"block mb-2 font-medium text-gray-800 dark:text-gray-200\">Podcast Style</label>\n      <div className=\"relative\">\n        <div \n          className=\"relative border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 p-3 cursor-pointer\"\n          onClick={() => setIsStyleMenuOpen(!isStyleMenuOpen)}\n        >\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center\">\n              <div className=\"p-2 rounded-full bg-indigo-100 dark:bg-indigo-900/50 mr-3\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"text-indigo-600 dark:text-indigo-400\">\n                  <path d=\"M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83\" />\n                </svg>\n              </div>\n              <div>\n                <div className=\"font-medium text-gray-900 dark:text-gray-100\">{selectedStyle.name}</div>\n                <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                {selectedStyle.podcastType} • {selectedStyle.duration} • {getQualityLevel(currentStyle.maxRevisions)}\n                </div>\n              </div>\n            </div>\n            <svg className=\"w-5 h-5 text-gray-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fillRule=\"evenodd\" d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\" clipRule=\"evenodd\"></path>\n            </svg>\n          </div>\n        </div>\n\n        {/* Style Dropdown */}\n        {isStyleMenuOpen && (\n          <div className=\"absolute z-10 mt-1 w-full bg-white dark:bg-gray-800 shadow-lg rounded-lg border border-gray-200 dark:border-gray-700 max-h-80 overflow-auto\">\n            {PODCAST_STYLES.map(style => (\n              <div \n                key={style.id}\n                className=\"p-3 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-200 dark:border-gray-700 last:border-b-0\"\n                onClick={() => handleStyleSelect(style.id)}\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <div className=\"font-medium text-gray-900 dark:text-gray-100\">{style.name}</div>\n                    <div className=\"text-sm text-gray-500 dark:text-gray-400\">{style.description}</div>\n                    <div className=\"flex flex-wrap gap-1 mt-1.5\">\n                      <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300\">\n                        {style.duration}\n                      </span>\n                      <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300\">\n                        {style.podcastType}\n                      </span>\n                      <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300\">\n                        {getQualityLevel(style.maxRevisions)}\n                      </span>\n                    </div>\n                  </div>\n                  {selectedStyleId === style.id && (\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-indigo-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                    </svg>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Custom Style Settings - REARRANGED ORDER */}\n        <div className={`mt-4 space-y-4 p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800/50 ${selectedStyleId === 'custom' ? 'border-indigo-300 dark:border-indigo-700' : ''}`}>\n          {/* Three settings first */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div>\n              <label className=\"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-300\">Format</label>\n              <select \n                className=\"w-full p-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100\"\n                value={customPodcastType}\n                onChange={handleCustomPodcastTypeChange}\n              >\n                <option value=\"Solo Briefing\">Solo Briefing</option>\n                <option value=\"Alternating Briefing\">Alternating Briefing</option>\n                <option value=\"Discussion\">Discussion</option>\n              </select>\n            </div>\n            \n            <div>\n              <label className=\"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-300\">Duration</label>\n              <select \n                className=\"w-full p-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100\"\n                value={customDuration}\n                onChange={handleCustomDurationChange}\n              >\n                <option value=\"Very Short\">Very Short (1-2 min)</option>\n                <option value=\"Short\">Short (3-5 min)</option>\n                <option value=\"Medium\">Medium (6-8 min)</option>\n                <option value=\"Long\">Long (9-12 min)</option>\n              </select>\n            </div>\n            \n            <div>\n              <label className=\"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-300\">Quality</label>\n              <select \n                className=\"w-full p-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100\"\n                value={customMaxRevisions}\n                onChange={handleMaxRevisionsChange}\n              >\n                <option value=\"1\">Fast (minimal revisions)</option>\n                <option value=\"2\">Balanced (moderate revisions)</option>\n                <option value=\"3\">High Quality (thorough revisions)</option>\n              </select>\n            </div>\n          </div>\n          \n          {/* Guidelines textarea moved below */}\n          <div>\n            <label className=\"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-300\">Guidelines (Optional)</label>\n            <textarea \n              className=\"w-full p-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100\"\n              rows={3}\n              placeholder=\"Enter specific instructions for tone, topics to emphasize, or content approach...\"\n              value={customGuidelines}\n              onChange={handleCustomGuidelinesChange}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2219, "column": 0}, "map": {"version":3,"sources":["file:///home/phucnb/Downloads/kikiPodcast/gen_podcast_v2/frontend/src/components/podcast/PodcastForm.tsx"],"sourcesContent":["'use client';\n\nimport { useState, FormEvent } from 'react';\nimport { SpeakerProfile } from '@/types/podcast';\nimport SpeakerSelection from './SpeakerSelection';\nimport { SPEAKER_PROFILES } from '@/lib/constants/speakers';\nimport PodcastStyleSelector, { PODCAST_STYLES } from './PodcastStyleSelector';\n\ninterface PodcastFormProps {\n  onSubmit: (formData: PodcastFormData) => void;\n  loading: boolean;\n}\n\nexport interface PodcastFormData {\n  urlList: string[];\n  guidelines: string;\n  duration: string;\n  speakerIds: number[];\n  podcastType: string;\n  maxRevisions: number;\n  speakerProfiles: SpeakerProfile[];\n  speakerSpeeds: { [speakerId: number]: number }; // Add speaker speeds\n}\n\nexport default function PodcastForm({ \n  onSubmit, \n  loading \n}: PodcastFormProps) {\n  const [urls, setUrls] = useState<string>('');\n  const [selectedSpeakers, setSelectedSpeakers] = useState<number[]>([0, 1]);\n  \n  // Add state for speaker speeds\n  const [speakerSpeeds, setSpeakerSpeeds] = useState<{ [speakerId: number]: number }>({\n    0: 1.0, // Default speed for speaker 0\n    1: 1.0  // Default speed for speaker 1\n  });\n  \n  // Style states (unified from format and quality)\n  const [guidelines, setGuidelines] = useState<string>('');\n  const [podcastType, setPodcastType] = useState<string>(PODCAST_STYLES[0].podcastType);\n  const [duration, setDuration] = useState<string>(PODCAST_STYLES[0].duration);\n  const [maxRevisions, setMaxRevisions] = useState<number>(PODCAST_STYLES[0].maxRevisions);\n\n  const handleStyleChange = (style: { \n    podcastType: string; \n    duration: string; \n    guidelines: string;\n    maxRevisions: number;\n  }) => {\n    setPodcastType(style.podcastType);\n    setDuration(style.duration);\n    setGuidelines(style.guidelines);\n    setMaxRevisions(style.maxRevisions);\n  };\n\n  // Handle speed changes for a specific speaker\n  const handleSpeedChange = (speakerId: number, newSpeed: number) => {\n    setSpeakerSpeeds(prev => ({\n      ...prev,\n      [speakerId]: newSpeed\n    }));\n  };\n\n  const handleSubmit = (e: FormEvent) => {\n    e.preventDefault();\n    \n    const urlList = urls.split('\\n').filter(url => url.trim().length > 0);\n    \n    if (urlList.length === 0) {\n      alert('Please enter at least one URL');\n      return;\n    }\n\n    if (selectedSpeakers.length === 0) {\n      alert('Please select at least one speaker');\n      return;\n    }\n\n    // Get the speaker profiles with speed values\n    const profilesWithSpeed = SPEAKER_PROFILES.filter(profile => \n      selectedSpeakers.includes(profile.id)\n    ).map(profile => ({\n      ...profile,\n      speed: speakerSpeeds[profile.id] || 1.0 // Use configured speed or default to 1.0\n    }));\n    \n    const formData: PodcastFormData = {\n      urlList,\n      guidelines,\n      duration,\n      speakerIds: selectedSpeakers,\n      podcastType,\n      maxRevisions,\n      speakerProfiles: profilesWithSpeed,\n      speakerSpeeds // Include speaker speeds in the form data\n    };\n\n    onSubmit(formData);\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"mb-8 bg-white dark:bg-gray-800 shadow-lg rounded-xl border border-gray-100 dark:border-gray-700 p-8 transition-all\">\n      <h2 className=\"text-2xl font-bold text-gray-800 dark:text-white mb-6 flex items-center\">\n        <svg \n          xmlns=\"http://www.w3.org/2000/svg\" \n          width=\"24\" \n          height=\"24\" \n          viewBox=\"0 0 24 24\" \n          fill=\"none\" \n          stroke=\"currentColor\" \n          strokeWidth=\"2\" \n          strokeLinecap=\"round\" \n          strokeLinejoin=\"round\"\n          className=\"mr-2 text-blue-600\"\n        >\n          <path d=\"M18 8h1a4 4 0 0 1 0 8h-1\"></path>\n          <path d=\"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z\"></path>\n          <line x1=\"6\" y1=\"1\" x2=\"6\" y2=\"4\"></line>\n          <line x1=\"10\" y1=\"1\" x2=\"10\" y2=\"4\"></line>\n          <line x1=\"14\" y1=\"1\" x2=\"14\" y2=\"4\"></line>\n        </svg>\n        Create Your Podcast\n      </h2>\n      \n      <div className=\"mb-6\">\n        <label className=\"block mb-2 font-medium text-gray-800 dark:text-gray-200\">Input URLs (one per line)</label>\n        <div className=\"relative\">\n          <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\" />\n            </svg>\n          </div>\n          <textarea \n            className=\"w-full pl-10 p-4 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100\"\n            rows={4}\n            placeholder={\"https://example.com/article1\\nhttps://example.com/article2\"}\n            value={urls}\n            onChange={(e) => setUrls(e.target.value)}\n          />\n        </div>\n        <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">Add URLs to articles you want to convert into podcast content</p>\n      </div>\n      \n      {/* Unified Style Selector */}\n      <PodcastStyleSelector onStyleChange={handleStyleChange} />\n      \n      <SpeakerSelection \n        selectedSpeakers={selectedSpeakers}\n        speakerSpeeds={speakerSpeeds}\n        onChange={setSelectedSpeakers}\n        onSpeedChange={handleSpeedChange}\n      />\n      \n      <div className=\"flex justify-center mt-8\">\n        <button \n          type=\"submit\"\n          disabled={loading}\n          className=\"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 transition-colors flex items-center justify-center gap-2 min-w-40\"\n        >\n          {loading ? (\n            <>\n              <svg className=\"animate-spin h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n              </svg>\n              Generating...\n            </>\n          ) : (\n            <>\n              <svg \n                xmlns=\"http://www.w3.org/2000/svg\" \n                width=\"20\" \n                height=\"20\" \n                viewBox=\"0 0 24 24\" \n                fill=\"none\" \n                stroke=\"currentColor\" \n                strokeWidth=\"2\" \n                strokeLinecap=\"round\" \n                strokeLinejoin=\"round\"\n              >\n                <path d=\"M18 8h1a4 4 0 0 1 0 8h-1\"></path>\n                <path d=\"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z\"></path>\n                <line x1=\"6\" y1=\"1\" x2=\"6\" y2=\"4\"></line>\n                <line x1=\"10\" y1=\"1\" x2=\"10\" y2=\"4\"></line>\n                <line x1=\"14\" y1=\"1\" x2=\"14\" y2=\"4\"></line>\n              </svg>\n              Generate Draft\n            </>\n          )}\n        </button>\n      </div>\n    </form>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2597, "column": 0}, "map": {"version":3,"sources":["file:///home/phucnb/Downloads/kikiPodcast/gen_podcast_v2/frontend/src/components/podcast/PodcastProgress.tsx"],"sourcesContent":["'use client';\n\ninterface PodcastProgressProps {\n  progress: number;\n  message?: string;\n}\n\nexport default function PodcastProgress({ \n  progress, \n  message = \"Your podcast is being generated. This may take a few minutes.\" \n}: PodcastProgressProps) {\n  return (\n    <div className=\"mt-8 mb-12 bg-white dark:bg-gray-800 shadow-lg rounded-xl border border-gray-100 dark:border-gray-700 p-6 transition-all animate-fade-in\">\n      <div className=\"flex items-start gap-4 mb-6\">\n        <div className=\"bg-blue-100 dark:bg-blue-900/50 rounded-full p-3\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\" />\n          </svg>\n        </div>\n        <div>\n          <h3 className=\"text-xl font-semibold text-gray-800 dark:text-white mb-1\">Generating Podcast</h3>\n          <p className=\"text-gray-600 dark:text-gray-300\">{message}</p>\n        </div>\n      </div>\n\n      <div className=\"space-y-2\">\n        <div className=\"flex justify-between text-sm font-medium text-gray-600 dark:text-gray-400 mb-1\">\n          <span>Processing content</span>\n          <span>{progress}%</span>\n        </div>\n        <div className=\"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden\">\n          <div \n            className=\"h-full bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full transition-all duration-300 ease-out\" \n            style={{width: `${progress}%`}}\n          ></div>\n        </div>\n      </div>\n\n      <div className=\"mt-6 grid grid-cols-3 gap-4\">\n        {progress >= 30 && (\n          <div className=\"flex flex-col items-center p-3 bg-gray-50 dark:bg-gray-700/30 rounded-lg border border-gray-100 dark:border-gray-600\">\n            <div className=\"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/50 flex items-center justify-center mb-2\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 text-green-600 dark:text-green-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n            </div>\n            <span className=\"text-xs text-center text-gray-700 dark:text-gray-300\">Content Analyzed</span>\n          </div>\n        )}\n        \n        {progress >= 60 && (\n          <div className=\"flex flex-col items-center p-3 bg-gray-50 dark:bg-gray-700/30 rounded-lg border border-gray-100 dark:border-gray-600\">\n            <div className=\"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/50 flex items-center justify-center mb-2\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 text-green-600 dark:text-green-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n              </svg>\n            </div>\n            <span className=\"text-xs text-center text-gray-700 dark:text-gray-300\">Script Generated</span>\n          </div>\n        )}\n        \n        {progress >= 90 && (\n          <div className=\"flex flex-col items-center p-3 bg-gray-50 dark:bg-gray-700/30 rounded-lg border border-gray-100 dark:border-gray-600\">\n            <div className=\"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/50 flex items-center justify-center mb-2\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 text-green-600 dark:text-green-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15.465a5 5 0 001.897-7.72m-3.95 10.5a9 9 0 0111.556-1.226L9.516 23.362l-4.983-4.983z\" />\n              </svg>\n            </div>\n            <span className=\"text-xs text-center text-gray-700 dark:text-gray-300\">Audio Processing</span>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAAA;;AAOe,SAAS,gBAAgB,EACtC,QAAQ,EACR,UAAU,+DAA+D,EACpD;IACrB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,OAAM;4BAA6B,WAAU;4BAA2C,MAAK;4BAAO,SAAQ;4BAAY,QAAO;sCAClI,cAAA,6LAAC;gCAAK,eAAc;gCAAQ,gBAAe;gCAAQ,aAAa;gCAAG,GAAE;;;;;;;;;;;;;;;;kCAGzE,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAA2D;;;;;;0CACzE,6LAAC;gCAAE,WAAU;0CAAoC;;;;;;;;;;;;;;;;;;0BAIrD,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;0CAAK;;;;;;0CACN,6LAAC;;oCAAM;oCAAS;;;;;;;;;;;;;kCAElB,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BACC,WAAU;4BACV,OAAO;gCAAC,OAAO,GAAG,SAAS,CAAC,CAAC;4BAAA;;;;;;;;;;;;;;;;;0BAKnC,6LAAC;gBAAI,WAAU;;oBACZ,YAAY,oBACX,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCAAI,OAAM;oCAA6B,WAAU;oCAA6C,MAAK;oCAAO,SAAQ;oCAAY,QAAO;8CACpI,cAAA,6LAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;;;;;;;0CAGzE,6LAAC;gCAAK,WAAU;0CAAuD;;;;;;;;;;;;oBAI1E,YAAY,oBACX,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCAAI,OAAM;oCAA6B,WAAU;oCAA6C,MAAK;oCAAO,SAAQ;oCAAY,QAAO;8CACpI,cAAA,6LAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;;;;;;;0CAGzE,6LAAC;gCAAK,WAAU;0CAAuD;;;;;;;;;;;;oBAI1E,YAAY,oBACX,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCAAI,OAAM;oCAA6B,WAAU;oCAA6C,MAAK;oCAAO,SAAQ;oCAAY,QAAO;8CACpI,cAAA,6LAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;;;;;;;0CAGzE,6LAAC;gCAAK,WAAU;0CAAuD;;;;;;;;;;;;;;;;;;;;;;;;AAMnF;KAnEwB","debugId":null}},
    {"offset": {"line": 2883, "column": 0}, "map": {"version":3,"sources":["file:///home/phucnb/Downloads/kikiPodcast/gen_podcast_v2/frontend/src/components/podcast/AudioPlayer.tsx"],"sourcesContent":["// src/components/podcast/AudioPlayer.tsx\n'use client';\n\nimport { useState, useRef, useEffect, useMemo } from 'react';\n\ninterface AudioPlayerProps {\n  src: string;\n  showControls?: boolean;\n  autoPlay?: boolean;\n  className?: string;\n}\n\nexport default function AudioPlayer({\n  src,\n  showControls = true,\n  autoPlay = false,\n  className = '',\n}: AudioPlayerProps) {\n  const audioRef = useRef<HTMLAudioElement>(null);\n  const [isPlaying, setIsPlaying] = useState(autoPlay);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const [error, setError] = useState<string | null>(null);\n  const [loading, setLoading] = useState(true);\n  const previousSrcRef = useRef(src);\n\n  // Process the source URL - using useMemo to avoid recalculation on every render\n  const audioSrc = useMemo(() => {\n    if (!src) return '';\n    \n    // If it's already an absolute URL, return it\n    if (src.startsWith('http://') || src.startsWith('https://')) {\n      return src;\n    }\n    \n    // If it's a demo path, keep it as is\n    if (src.startsWith('/demo/')) {\n      return src;\n    }\n    \n    // Convert backslashes to forward slashes\n    const cleanPath = src.replace(/\\\\/g, '/');\n    \n    // Simple transformation to API route\n    if (cleanPath.includes('podcast_audio')) {\n      const parts = cleanPath.split('podcast_audio/');\n      if (parts.length > 1) {\n        return `/api/audio/${parts[1]}`;\n      }\n    }\n    \n    // Basic path transformation\n    return `/api/audio/${cleanPath.split('/').filter(Boolean).slice(-2).join('/')}`;\n  }, [src]);\n\n  // Reset states when the src prop changes\n  useEffect(() => {\n    // Only update if the source has actually changed\n    if (src !== previousSrcRef.current) {\n      console.log(`Audio source changed to: ${src}`);\n      console.log(`Processed to: ${audioSrc}`);\n      \n      setError(null);\n      setLoading(true);\n      setIsPlaying(false);\n      setCurrentTime(0);\n      \n      if (!audioSrc) {\n        setLoading(false);\n      }\n      \n      previousSrcRef.current = src;\n    }\n  }, [src, audioSrc]);\n\n  // Handle audio element events\n  useEffect(() => {\n    const audio = audioRef.current;\n    if (!audio) return;\n\n    const handleTimeUpdate = () => {\n      setCurrentTime(audio.currentTime);\n    };\n\n    const handleDurationChange = () => {\n      setDuration(audio.duration);\n      setLoading(false);\n    };\n\n    const handleEnded = () => {\n      setIsPlaying(false);\n      setCurrentTime(0);\n      audio.currentTime = 0;\n    };\n\n    const handleCanPlay = () => {\n      setLoading(false);\n    };\n\n    const handleError = () => {\n      console.error(\"Audio playback error for:\", audioSrc);\n      setError(\"Unable to play audio. The file may not be available.\");\n      setIsPlaying(false);\n      setLoading(false);\n    };\n\n    // Add event listeners\n    audio.addEventListener('timeupdate', handleTimeUpdate);\n    audio.addEventListener('durationchange', handleDurationChange);\n    audio.addEventListener('ended', handleEnded);\n    audio.addEventListener('canplay', handleCanPlay);\n    audio.addEventListener('error', handleError);\n    \n    // If the audio source exists, load it\n    if (audioSrc) {\n      audio.load();\n    }\n\n    // Clean up event listeners\n    return () => {\n      audio.removeEventListener('timeupdate', handleTimeUpdate);\n      audio.removeEventListener('durationchange', handleDurationChange);\n      audio.removeEventListener('ended', handleEnded);\n      audio.removeEventListener('canplay', handleCanPlay);\n      audio.removeEventListener('error', handleError);\n    };\n  }, [audioSrc]);\n\n  const togglePlayPause = () => {\n    const audio = audioRef.current;\n    if (!audio || loading) return;\n\n    if (isPlaying) {\n      audio.pause();\n      setIsPlaying(false);\n    } else {\n      const playPromise = audio.play();\n      if (playPromise !== undefined) {\n        playPromise\n          .then(() => {\n            setIsPlaying(true);\n          })\n          .catch(() => {\n            setError(\"Playback failed. This may be due to browser autoplay restrictions.\");\n            setIsPlaying(false);\n          });\n      }\n    }\n  };\n\n  const handleProgressChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const audio = audioRef.current;\n    if (!audio) return;\n\n    const newTime = parseFloat(e.target.value);\n    audio.currentTime = newTime;\n    setCurrentTime(newTime);\n  };\n\n  const formatTime = (timeInSeconds: number): string => {\n    if (isNaN(timeInSeconds)) return \"0:00\";\n    const minutes = Math.floor(timeInSeconds / 60);\n    const seconds = Math.floor(timeInSeconds % 60);\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n  };\n\n  // Check if source is valid\n  const isValidSrc = Boolean(audioSrc);\n\n  return (\n    <div className={`flex flex-col ${className}`}>\n      {isValidSrc ? (\n        <>\n          <audio\n            ref={audioRef}\n            src={audioSrc}\n            preload=\"metadata\"\n            className={showControls ? 'hidden' : 'w-full'}\n          />\n\n          {error && (\n            <div className=\"text-red-500 dark:text-red-400 text-xs mb-2 bg-red-50 dark:bg-red-900/20 p-2 rounded border border-red-200 dark:border-red-800\">\n              {error}\n            </div>\n          )}\n\n          {showControls && (\n            <div className=\"flex flex-col w-full\">\n              <div className=\"flex items-center gap-2 mb-1\">\n                <button\n                  onClick={togglePlayPause}\n                  disabled={!!error || loading}\n                  className={`p-2 rounded-full flex items-center justify-center transition-colors ${\n                    error || loading \n                      ? 'bg-gray-300 dark:bg-gray-700 cursor-not-allowed' \n                      : 'bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-600'\n                  } text-white focus:outline-none focus:ring-2 focus:ring-blue-500`}\n                  aria-label={isPlaying ? \"Pause\" : \"Play\"}\n                >\n                  {loading ? (\n                    <svg className=\"animate-spin h-5 w-5\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                    </svg>\n                  ) : isPlaying ? (\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                      <rect x=\"6\" y=\"4\" width=\"4\" height=\"16\"></rect>\n                      <rect x=\"14\" y=\"4\" width=\"4\" height=\"16\"></rect>\n                    </svg>\n                  ) : (\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                      <polygon points=\"5 3 19 12 5 21 5 3\"></polygon>\n                    </svg>\n                  )}\n                </button>\n\n                <div className=\"flex-1\">\n                  <input\n                    type=\"range\"\n                    min=\"0\"\n                    max={duration || 0}\n                    value={currentTime}\n                    onChange={handleProgressChange}\n                    disabled={!!error || duration === 0 || loading}\n                    className={`w-full h-2 rounded-lg appearance-none cursor-pointer ${\n                      error || duration === 0 || loading\n                        ? 'bg-gray-200 dark:bg-gray-700 opacity-50' \n                        : 'bg-gray-200 dark:bg-gray-700'\n                    }`}\n                    style={{\n                      background: !error && duration > 0 && !loading\n                        ? `linear-gradient(to right, #3B82F6 0%, #3B82F6 ${(currentTime / duration) * 100}%, #E5E7EB ${(currentTime / duration) * 100}%, #E5E7EB 100%)`\n                        : undefined\n                    }}\n                  />\n                </div>\n\n                <div className=\"text-xs text-gray-600 dark:text-gray-400 w-16 text-right font-mono\">\n                  {formatTime(currentTime)} / {formatTime(duration || 0)}\n                </div>\n              </div>\n            </div>\n          )}\n        </>\n      ) : (\n        <div className=\"flex items-center justify-center p-3 bg-gray-100 dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700\">\n          <span className=\"text-gray-500 dark:text-gray-400 text-sm\">Audio not available</span>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3251, "column": 0}, "map": {"version":3,"sources":["file:///home/phucnb/Downloads/kikiPodcast/gen_podcast_v2/frontend/src/components/podcast/UtteranceCard.tsx"],"sourcesContent":["// src/components/podcast/UtteranceCard.tsx\n'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport { PodcastData } from '@/types/podcast';\nimport AudioPlayer from './AudioPlayer';\n\ninterface UtteranceCardProps {\n  item: PodcastData;\n  index: number;\n  audioUrl?: string;\n  onUpdate: (index: number, newContent: string) => void;\n  onRegenerateAudio?: () => void;\n  isRegenerating?: boolean;\n  disableRegeneration?: boolean;\n}\n\nexport default function UtteranceCard({ \n  item, \n  index, \n  audioUrl, \n  onUpdate,\n  onRegenerateAudio,\n  isRegenerating = false,\n  disableRegeneration = false\n}: UtteranceCardProps) {\n  const [isEditMode, setIsEditMode] = useState(false);\n  const [editedContent, setEditedContent] = useState(item.content);\n  const [isTransitioning, setIsTransitioning] = useState(false);\n  const previousContentRef = useRef(item.content);\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n  \n  // Update content if it changes from parent - with fix to prevent infinite loops\n  useEffect(() => {\n    if (item.content !== previousContentRef.current) {\n      setEditedContent(item.content);\n      previousContentRef.current = item.content;\n    }\n  }, [item.content]);\n\n  // Auto-focus textarea and auto-resize when in edit mode\n  useEffect(() => {\n    if (isEditMode && textareaRef.current) {\n      textareaRef.current.focus();\n      adjustTextareaHeight(textareaRef.current);\n    }\n  }, [isEditMode]);\n\n  // Handle mode transition with animation\n  const toggleEditMode = (toEdit: boolean) => {\n    setIsTransitioning(true);\n    \n    // Short delay for the animation to play\n    setTimeout(() => {\n      setIsEditMode(toEdit);\n      setTimeout(() => {\n        setIsTransitioning(false);\n      }, 50);\n    }, 150);\n  };\n\n  const handleSave = () => {\n    // Only update and regenerate if content actually changed\n    if (editedContent !== item.content) {\n      onUpdate(index, editedContent);\n      \n      // Automatically regenerate audio when script is updated\n      if (onRegenerateAudio && !disableRegeneration && !isRegenerating) {\n        onRegenerateAudio();\n      }\n    }\n    \n    toggleEditMode(false);\n  };\n\n  const handleCancel = () => {\n    setEditedContent(item.content);\n    toggleEditMode(false);\n  };\n\n  // Auto-resize textarea to fit content\n  const adjustTextareaHeight = (element: HTMLTextAreaElement) => {\n    element.style.height = 'auto';\n    element.style.height = `${element.scrollHeight}px`;\n  };\n\n  // Get speaker style classes based on speaker type\n  const getSpeakerColorClass = () => {\n    if (item.speaker.includes(\"MC1\")) {\n      return {\n        bg: 'bg-blue-50 dark:bg-blue-900/30',\n        border: 'border-blue-200 dark:border-blue-800',\n        icon: 'bg-blue-100 text-blue-600 dark:bg-blue-800 dark:text-blue-300',\n        text: 'text-blue-700 dark:text-blue-300',\n        audioBtn: 'bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-600',\n        lightBg: 'bg-blue-50 dark:bg-blue-900/20',\n        lightBorder: 'border-blue-100 dark:border-blue-900'\n      };\n    } else if (item.speaker.includes(\"MC2\")) {\n      return {\n        bg: 'bg-amber-50 dark:bg-amber-900/30',\n        border: 'border-amber-200 dark:border-amber-800',\n        icon: 'bg-amber-100 text-amber-600 dark:bg-amber-800 dark:text-amber-300',\n        text: 'text-amber-700 dark:text-amber-300',\n        audioBtn: 'bg-amber-600 hover:bg-amber-700 dark:bg-amber-700 dark:hover:bg-amber-600',\n        lightBg: 'bg-amber-50 dark:bg-amber-900/20',\n        lightBorder: 'border-amber-100 dark:border-amber-900'\n      };\n    } else {\n      return {\n        bg: 'bg-gray-50 dark:bg-gray-800/50',\n        border: 'border-gray-200 dark:border-gray-700',\n        icon: 'bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300',\n        text: 'text-gray-700 dark:text-gray-300',\n        audioBtn: 'bg-gray-600 hover:bg-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600',\n        lightBg: 'bg-gray-50 dark:bg-gray-800/30',\n        lightBorder: 'border-gray-100 dark:border-gray-800'\n      };\n    }\n  };\n\n  const colorClass = getSpeakerColorClass();\n\n  return (\n    <div className={`rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-all duration-300 border ${colorClass.border}`}>\n      {/* Speaker header section */}\n      <div className={`p-3 ${colorClass.bg} flex justify-between items-center border-b ${colorClass.border}`}>\n        <div className=\"flex items-center\">\n          <div className={`w-10 h-10 rounded-full flex items-center justify-center mr-3 ${colorClass.icon}`}>\n            {item.speaker.includes(\"MC1\") ? (\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n            ) : (\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n              </svg>\n            )}\n          </div>\n          <div>\n            <h4 className={`font-bold ${colorClass.text}`}>{item.speaker}</h4>\n          </div>\n        </div>\n        \n        {/* Edit/Save Actions */}\n        <div className=\"flex items-center gap-2\">\n          {isEditMode ? (\n            <>\n              <button\n                onClick={handleSave}\n                className={`bg-green-600 hover:bg-green-700 text-white p-2.5 rounded-full flex items-center justify-center transition-all shadow-sm ${isTransitioning ? 'scale-95 opacity-70' : 'scale-100 opacity-100'}`}\n                title=\"Save changes\"\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                </svg>\n              </button>\n              <button\n                onClick={handleCancel}\n                className={`bg-gray-600 hover:bg-gray-700 text-white p-2.5 rounded-full flex items-center justify-center transition-all shadow-sm ${isTransitioning ? 'scale-95 opacity-70' : 'scale-100 opacity-100'}`}\n                title=\"Cancel\"\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </>\n          ) : (\n            <button\n              onClick={() => toggleEditMode(true)}\n              className={`bg-white dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 p-2.5 rounded-full flex items-center justify-center transition-all shadow-sm border border-gray-200 dark:border-gray-600 ${isTransitioning ? 'scale-95 opacity-70' : 'scale-100 opacity-100'}`}\n              title=\"Edit script\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\" />\n              </svg>\n            </button>\n          )}\n        </div>\n      </div>\n      \n      {/* Content and Audio section - side by side */}\n      <div className=\"flex flex-col md:flex-row\">\n        {/* Content area with animation */}\n        <div className={`flex-1 p-4 bg-white dark:bg-gray-800 ${isEditMode ? 'md:w-full' : ''} transition-all duration-300`}>\n          <div className={`transition-all duration-300 ${isTransitioning ? 'opacity-0 transform translate-y-2' : 'opacity-100 transform translate-y-0'}`}>\n            {isEditMode ? (\n              <textarea\n                ref={textareaRef}\n                value={editedContent}\n                onChange={(e) => {\n                  setEditedContent(e.target.value);\n                  adjustTextareaHeight(e.target);\n                }}\n                className=\"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md min-h-24 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 resize-none transition-colors duration-200\"\n                placeholder=\"Enter the speaker's dialogue here...\"\n              />\n            ) : (\n              <div>\n                <p className=\"text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-wrap\">{item.content}</p>\n                \n                {/* Update script button in content area when not editing */}\n\n              </div>\n            )}\n          </div>\n        </div>\n        \n        {/* Audio player section - only show when not editing, with animations */}\n        {!isEditMode && (\n          <div className={`md:w-52 p-3 ${colorClass.lightBg} border-t md:border-t-0 md:border-l ${colorClass.border} flex flex-col justify-center transition-opacity duration-300 ${isTransitioning ? 'opacity-0' : 'opacity-100'}`}>\n            {isRegenerating && (\n              <div className=\"flex items-center mb-2 justify-center\">\n                <span className=\"flex items-center text-xs font-medium text-amber-600 dark:text-amber-400\">\n                  <svg className=\"animate-spin h-3 w-3 mr-1\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                  </svg>\n                  Regenerating audio...\n                </span>\n              </div>\n            )}\n            \n            <AudioPlayer \n              src={audioUrl || ''} \n              showControls={true} \n              className=\"w-full\" \n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"AAAA,2CAA2C;;;;;AAG3C;AAEA;;;AAJA;;;AAgBe,SAAS,cAAc,EACpC,IAAI,EACJ,KAAK,EACL,QAAQ,EACR,QAAQ,EACR,iBAAiB,EACjB,iBAAiB,KAAK,EACtB,sBAAsB,KAAK,EACR;;IACnB,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,KAAK,OAAO;IAC/D,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvD,MAAM,qBAAqB,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAE,KAAK,OAAO;IAC9C,MAAM,cAAc,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAuB;IAEhD,gFAAgF;IAChF,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;mCAAE;YACR,IAAI,KAAK,OAAO,KAAK,mBAAmB,OAAO,EAAE;gBAC/C,iBAAiB,KAAK,OAAO;gBAC7B,mBAAmB,OAAO,GAAG,KAAK,OAAO;YAC3C;QACF;kCAAG;QAAC,KAAK,OAAO;KAAC;IAEjB,wDAAwD;IACxD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;mCAAE;YACR,IAAI,cAAc,YAAY,OAAO,EAAE;gBACrC,YAAY,OAAO,CAAC,KAAK;gBACzB,qBAAqB,YAAY,OAAO;YAC1C;QACF;kCAAG;QAAC;KAAW;IAEf,wCAAwC;IACxC,MAAM,iBAAiB,CAAC;QACtB,mBAAmB;QAEnB,wCAAwC;QACxC,WAAW;YACT,cAAc;YACd,WAAW;gBACT,mBAAmB;YACrB,GAAG;QACL,GAAG;IACL;IAEA,MAAM,aAAa;QACjB,yDAAyD;QACzD,IAAI,kBAAkB,KAAK,OAAO,EAAE;YAClC,SAAS,OAAO;YAEhB,wDAAwD;YACxD,IAAI,qBAAqB,CAAC,uBAAuB,CAAC,gBAAgB;gBAChE;YACF;QACF;QAEA,eAAe;IACjB;IAEA,MAAM,eAAe;QACnB,iBAAiB,KAAK,OAAO;QAC7B,eAAe;IACjB;IAEA,sCAAsC;IACtC,MAAM,uBAAuB,CAAC;QAC5B,QAAQ,KAAK,CAAC,MAAM,GAAG;QACvB,QAAQ,KAAK,CAAC,MAAM,GAAG,GAAG,QAAQ,YAAY,CAAC,EAAE,CAAC;IACpD;IAEA,kDAAkD;IAClD,MAAM,uBAAuB;QAC3B,IAAI,KAAK,OAAO,CAAC,QAAQ,CAAC,QAAQ;YAChC,OAAO;gBACL,IAAI;gBACJ,QAAQ;gBACR,MAAM;gBACN,MAAM;gBACN,UAAU;gBACV,SAAS;gBACT,aAAa;YACf;QACF,OAAO,IAAI,KAAK,OAAO,CAAC,QAAQ,CAAC,QAAQ;YACvC,OAAO;gBACL,IAAI;gBACJ,QAAQ;gBACR,MAAM;gBACN,MAAM;gBACN,UAAU;gBACV,SAAS;gBACT,aAAa;YACf;QACF,OAAO;YACL,OAAO;gBACL,IAAI;gBACJ,QAAQ;gBACR,MAAM;gBACN,MAAM;gBACN,UAAU;gBACV,SAAS;gBACT,aAAa;YACf;QACF;IACF;IAEA,MAAM,aAAa;IAEnB,qBACE,6LAAC;QAAI,WAAW,CAAC,wFAAwF,EAAE,WAAW,MAAM,EAAE;;0BAE5H,6LAAC;gBAAI,WAAW,CAAC,IAAI,EAAE,WAAW,EAAE,CAAC,4CAA4C,EAAE,WAAW,MAAM,EAAE;;kCACpG,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAW,CAAC,6DAA6D,EAAE,WAAW,IAAI,EAAE;0CAC9F,KAAK,OAAO,CAAC,QAAQ,CAAC,uBACrB,6LAAC;oCAAI,OAAM;oCAA6B,WAAU;oCAAU,MAAK;oCAAO,SAAQ;oCAAY,QAAO;8CACjG,cAAA,6LAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;yDAGvE,6LAAC;oCAAI,OAAM;oCAA6B,WAAU;oCAAU,MAAK;oCAAO,SAAQ;oCAAY,QAAO;8CACjG,cAAA,6LAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;;;;;;;0CAI3E,6LAAC;0CACC,cAAA,6LAAC;oCAAG,WAAW,CAAC,UAAU,EAAE,WAAW,IAAI,EAAE;8CAAG,KAAK,OAAO;;;;;;;;;;;;;;;;;kCAKhE,6LAAC;wBAAI,WAAU;kCACZ,2BACC;;8CACE,6LAAC;oCACC,SAAS;oCACT,WAAW,CAAC,wHAAwH,EAAE,kBAAkB,wBAAwB,yBAAyB;oCACzM,OAAM;8CAEN,cAAA,6LAAC;wCAAI,OAAM;wCAA6B,WAAU;wCAAU,MAAK;wCAAO,SAAQ;wCAAY,QAAO;kDACjG,cAAA,6LAAC;4CAAK,eAAc;4CAAQ,gBAAe;4CAAQ,aAAa;4CAAG,GAAE;;;;;;;;;;;;;;;;8CAGzE,6LAAC;oCACC,SAAS;oCACT,WAAW,CAAC,sHAAsH,EAAE,kBAAkB,wBAAwB,yBAAyB;oCACvM,OAAM;8CAEN,cAAA,6LAAC;wCAAI,OAAM;wCAA6B,WAAU;wCAAU,MAAK;wCAAO,SAAQ;wCAAY,QAAO;kDACjG,cAAA,6LAAC;4CAAK,eAAc;4CAAQ,gBAAe;4CAAQ,aAAa;4CAAG,GAAE;;;;;;;;;;;;;;;;;yDAK3E,6LAAC;4BACC,SAAS,IAAM,eAAe;4BAC9B,WAAW,CAAC,6NAA6N,EAAE,kBAAkB,wBAAwB,yBAAyB;4BAC9S,OAAM;sCAEN,cAAA,6LAAC;gCAAI,OAAM;gCAA6B,WAAU;gCAAU,MAAK;gCAAO,SAAQ;gCAAY,QAAO;0CACjG,cAAA,6LAAC;oCAAK,eAAc;oCAAQ,gBAAe;oCAAQ,aAAa;oCAAG,GAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAQ/E,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC;wBAAI,WAAW,CAAC,qCAAqC,EAAE,aAAa,cAAc,GAAG,4BAA4B,CAAC;kCACjH,cAAA,6LAAC;4BAAI,WAAW,CAAC,4BAA4B,EAAE,kBAAkB,sCAAsC,uCAAuC;sCAC3I,2BACC,6LAAC;gCACC,KAAK;gCACL,OAAO;gCACP,UAAU,CAAC;oCACT,iBAAiB,EAAE,MAAM,CAAC,KAAK;oCAC/B,qBAAqB,EAAE,MAAM;gCAC/B;gCACA,WAAU;gCACV,aAAY;;;;;qDAGd,6LAAC;0CACC,cAAA,6LAAC;oCAAE,WAAU;8CAAwE,KAAK,OAAO;;;;;;;;;;;;;;;;;;;;;oBAUxG,CAAC,4BACA,6LAAC;wBAAI,WAAW,CAAC,YAAY,EAAE,WAAW,OAAO,CAAC,oCAAoC,EAAE,WAAW,MAAM,CAAC,8DAA8D,EAAE,kBAAkB,cAAc,eAAe;;4BACtN,gCACC,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCAAK,WAAU;;sDACd,6LAAC;4CAAI,WAAU;4CAA4B,OAAM;4CAA6B,MAAK;4CAAO,SAAQ;;8DAChG,6LAAC;oDAAO,WAAU;oDAAa,IAAG;oDAAK,IAAG;oDAAK,GAAE;oDAAK,QAAO;oDAAe,aAAY;;;;;;8DACxF,6LAAC;oDAAK,WAAU;oDAAa,MAAK;oDAAe,GAAE;;;;;;;;;;;;wCAC/C;;;;;;;;;;;;0CAMZ,6LAAC,+IAAA,CAAA,UAAW;gCACV,KAAK,YAAY;gCACjB,cAAc;gCACd,WAAU;;;;;;;;;;;;;;;;;;;;;;;;AAOxB;GAxNwB;KAAA","debugId":null}},
    {"offset": {"line": 3679, "column": 0}, "map": {"version":3,"sources":["file:///home/phucnb/Downloads/kikiPodcast/gen_podcast_v2/frontend/src/lib/utils/podcast.ts"],"sourcesContent":["/**\n * Utility functions for the podcast generator application\n */\n\nimport { PodcastData } from '@/types/podcast';\n\n/**\n * Split a long utterance into smaller chunks suitable for TTS processing.\n */\nexport function splitLongUtterance(text: string): string[] {\n  const words = text.split(/\\s+/);\n  \n  // If text is less than 80 words, return as single chunk\n  if (words.length <= 80) {\n    return [text];\n  }\n\n  const sentences = text.split('.').filter(s => s.trim().length > 0);\n  const chunks: string[] = [];\n  let currentChunk: string[] = [];\n  let currentWordCount = 0;\n\n  for (const sentence of sentences) {\n    const sentenceWords = sentence.trim().split(/\\s+/);\n    const sentenceWordCount = sentenceWords.length;\n\n    // If adding this sentence keeps us under 80 words and we're over 50,\n    // or if this is the first sentence in the chunk, add it\n    if (currentWordCount + sentenceWordCount <= 80) {\n      currentChunk.push(sentence);\n      currentWordCount += sentenceWordCount;\n\n      // If we're between 40-80 words, store the chunk and start a new one\n      if (currentWordCount >= 40) {\n        chunks.push(`${currentChunk.join('. ')}.`);\n        currentChunk = [];\n        currentWordCount = 0;\n      }\n    } else {\n      if (currentChunk.length > 0) {\n        chunks.push(`${currentChunk.join('. ')}.`);\n      }\n\n      currentChunk = [sentence];\n      currentWordCount = sentenceWordCount;\n    }\n  }\n\n  // Add any remaining chunk\n  if (currentChunk.length > 0) {\n    chunks.push(`${currentChunk.join('. ')}.`);\n  }\n\n  return chunks;\n}\n\n/**\n * Generate a script file from podcast data\n */\nexport function generateScriptContent(podcastData: PodcastData[]): string {\n  return podcastData.map(item => {\n    const formattedSpeaker = item.speaker.includes('MC1') \n      ? 'MC1' \n      : item.speaker.includes('MC2') \n        ? 'MC2' \n        : item.speaker;\n        \n    return `${formattedSpeaker}: ${item.content}`;\n  }).join('\\n\\n');\n}\n\n/**\n * Format time in a human-readable format\n */\nexport function formatTime(seconds: number): string {\n  const minutes = Math.floor(seconds / 60);\n  const remainingSeconds = Math.floor(seconds % 60);\n  return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;\n}\n\n/**\n * Creates a download link for a blob\n */\nexport function createDownloadLink(content: string, filename: string): void {\n  const blob = new Blob([content], { type: 'text/plain' });\n  const url = URL.createObjectURL(blob);\n  \n  const anchor = document.createElement('a');\n  anchor.href = url;\n  anchor.download = filename;\n  \n  // Trigger download\n  document.body.appendChild(anchor);\n  anchor.click();\n  \n  // Cleanup\n  document.body.removeChild(anchor);\n  URL.revokeObjectURL(url);\n}"],"names":[],"mappings":"AAAA;;CAEC;;;;;;AAOM,SAAS,mBAAmB,IAAY;IAC7C,MAAM,QAAQ,KAAK,KAAK,CAAC;IAEzB,wDAAwD;IACxD,IAAI,MAAM,MAAM,IAAI,IAAI;QACtB,OAAO;YAAC;SAAK;IACf;IAEA,MAAM,YAAY,KAAK,KAAK,CAAC,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,IAAI,GAAG,MAAM,GAAG;IAChE,MAAM,SAAmB,EAAE;IAC3B,IAAI,eAAyB,EAAE;IAC/B,IAAI,mBAAmB;IAEvB,KAAK,MAAM,YAAY,UAAW;QAChC,MAAM,gBAAgB,SAAS,IAAI,GAAG,KAAK,CAAC;QAC5C,MAAM,oBAAoB,cAAc,MAAM;QAE9C,qEAAqE;QACrE,wDAAwD;QACxD,IAAI,mBAAmB,qBAAqB,IAAI;YAC9C,aAAa,IAAI,CAAC;YAClB,oBAAoB;YAEpB,oEAAoE;YACpE,IAAI,oBAAoB,IAAI;gBAC1B,OAAO,IAAI,CAAC,GAAG,aAAa,IAAI,CAAC,MAAM,CAAC,CAAC;gBACzC,eAAe,EAAE;gBACjB,mBAAmB;YACrB;QACF,OAAO;YACL,IAAI,aAAa,MAAM,GAAG,GAAG;gBAC3B,OAAO,IAAI,CAAC,GAAG,aAAa,IAAI,CAAC,MAAM,CAAC,CAAC;YAC3C;YAEA,eAAe;gBAAC;aAAS;YACzB,mBAAmB;QACrB;IACF;IAEA,0BAA0B;IAC1B,IAAI,aAAa,MAAM,GAAG,GAAG;QAC3B,OAAO,IAAI,CAAC,GAAG,aAAa,IAAI,CAAC,MAAM,CAAC,CAAC;IAC3C;IAEA,OAAO;AACT;AAKO,SAAS,sBAAsB,WAA0B;IAC9D,OAAO,YAAY,GAAG,CAAC,CAAA;QACrB,MAAM,mBAAmB,KAAK,OAAO,CAAC,QAAQ,CAAC,SAC3C,QACA,KAAK,OAAO,CAAC,QAAQ,CAAC,SACpB,QACA,KAAK,OAAO;QAElB,OAAO,GAAG,iBAAiB,EAAE,EAAE,KAAK,OAAO,EAAE;IAC/C,GAAG,IAAI,CAAC;AACV;AAKO,SAAS,WAAW,OAAe;IACxC,MAAM,UAAU,KAAK,KAAK,CAAC,UAAU;IACrC,MAAM,mBAAmB,KAAK,KAAK,CAAC,UAAU;IAC9C,OAAO,GAAG,QAAQ,CAAC,EAAE,iBAAiB,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;AACrE;AAKO,SAAS,mBAAmB,OAAe,EAAE,QAAgB;IAClE,MAAM,OAAO,IAAI,KAAK;QAAC;KAAQ,EAAE;QAAE,MAAM;IAAa;IACtD,MAAM,MAAM,IAAI,eAAe,CAAC;IAEhC,MAAM,SAAS,SAAS,aAAa,CAAC;IACtC,OAAO,IAAI,GAAG;IACd,OAAO,QAAQ,GAAG;IAElB,mBAAmB;IACnB,SAAS,IAAI,CAAC,WAAW,CAAC;IAC1B,OAAO,KAAK;IAEZ,UAAU;IACV,SAAS,IAAI,CAAC,WAAW,CAAC;IAC1B,IAAI,eAAe,CAAC;AACtB","debugId":null}},
    {"offset": {"line": 3766, "column": 0}, "map": {"version":3,"sources":["file:///home/phucnb/Downloads/kikiPodcast/gen_podcast_v2/frontend/src/lib/api/podcast.ts"],"sourcesContent":["/**\n * Client-side API functions for interacting with the podcast generation service\n */\nimport { PodcastData, APIResponse, PodcastGenerationPayload } from '@/types/podcast';\n\n/**\n * Generate a podcast from a list of URLs\n * This calls the backend which uses process_tts and generate_podcast_audio_parallel\n * Backend host: localhost:8172\n */\nexport async function generatePodcast(payload: PodcastGenerationPayload): Promise<APIResponse> {\n  try {\n    console.log(\"Generating podcast with payload:\", payload);\n    \n    const response = await fetch('/api/podcast', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(payload)\n    });\n\n    if (!response.ok) {\n      throw new Error(`API call failed with status: ${response.status}`);\n    }\n\n    const data: APIResponse = await response.json();\n    console.log(\"Podcast generation response:\", data);\n    return data;\n  } catch (error) {\n    console.error('Error generating podcast:', error);\n    return {\n      status_code: -1,\n      data: [],\n      error: error instanceof Error ? error.message : 'Unknown error occurred'\n    };\n  }\n}\n\n/**\n * Regenerate audio for a single utterance\n * This uses the TTS API indirectly through the backend which calls:\n * 'https://kiki-tts-engine.tts.zalo.ai/generate_audio'\n */\nexport async function regenerateUtterance(\n  podcastData: PodcastData[], \n  idx: number, \n  podcastDir: string\n): Promise<string[]> {\n  try {\n    console.log(`Regenerating utterance ${idx} in directory ${podcastDir}`);\n    \n    // Create payload matching the Python function parameters\n    const payload = {\n      podcast_data: podcastData,\n      idx,\n      podcast_dir: podcastDir\n    };\n    \n    console.log(\"Regeneration payload:\", payload);\n    \n    const response = await fetch('/api/podcast/regenerate-utterance', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(payload)\n    });\n\n    if (!response.ok) {\n      throw new Error(`API call failed with status: ${response.status}`);\n    }\n\n    const data = await response.json();\n    console.log(\"Regenerated utterance response:\", data);\n    \n    // The Python function returns an array of audio file paths\n    if (data.audio_files && Array.isArray(data.audio_files)) {\n      // Ensure all paths use forward slashes and are properly formatted\n      const formattedPaths = data.audio_files.map(path => {\n        // Convert backslashes to forward slashes (Windows paths)\n        let formattedPath = path.replace(/\\\\/g, '/');\n        \n        // Ensure path starts with a slash if it doesn't \n        if (!formattedPath.startsWith('/') && !formattedPath.startsWith('http')) {\n          formattedPath = '/' + formattedPath;\n        }\n        \n        console.log(\"Formatted audio path:\", formattedPath);\n        return formattedPath;\n      });\n      \n      return formattedPaths;\n    } else {\n      console.error(\"Unexpected response format:\", data);\n      return [];\n    }\n  } catch (error) {\n    console.error('Error regenerating utterance audio:', error);\n    return [];\n  }\n}\n\n/**\n * Generate the final podcast audio\n * This calls the dedicated full podcast generation service at:\n * 'http://10.30.78.48:8282/gen-audio'\n */\nexport async function generateFullPodcastAudio(\n  podcastData: PodcastData[],\n  podcastDir?: string\n): Promise<{ success: boolean; audioUrl?: string; error?: string }> {\n  try {\n    console.log(\"Generating full podcast audio with data:\", podcastData.length, \"utterances\");\n    if (podcastDir) {\n      console.log(\"Using podcast directory:\", podcastDir);\n    }\n    \n    // Format the podcast data to match what the backend expects for the gen-audio endpoint\n    const formattedData = podcastData.map(item => {\n      // Format speaker as MC1 or MC2\n      let formattedSpeaker = item.speaker;\n      if (item.speaker.includes(\"MC1\")) {\n        formattedSpeaker = \"MC1\";\n      } else if (item.speaker.includes(\"MC2\")) {\n        formattedSpeaker = \"MC2\";\n      }\n      \n      return {\n        speaker: formattedSpeaker,\n        content: item.content\n      };\n    });\n    \n    // Create the payload, including podcast_dir if provided\n    const payload = podcastDir ? \n      { podcast_data: formattedData, podcast_dir: podcastDir } : \n      formattedData;\n    \n    const response = await fetch('/api/podcast/generate-full', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(payload)\n    });\n\n    if (!response.ok) {\n      throw new Error(`API call failed with status: ${response.status}`);\n    }\n\n    const data = await response.json();\n    console.log(\"Full podcast audio response:\", data);\n    \n    if (data.status_code === 0) {\n      // The Python function returns the URL in the data field\n      return { success: true, audioUrl: data.data };\n    } else {\n      return { \n        success: false, \n        error: data.error || 'Failed to generate full podcast audio' \n      };\n    }\n  } catch (error) {\n    console.error('Error generating full podcast audio:', error);\n    return { \n      success: false, \n      error: error instanceof Error ? error.message : 'Unknown error occurred' \n    };\n  }\n}\n\n// Add this function to src/lib/api/podcast.ts\nexport async function generateBatchAudio(\n  podcastData: PodcastData[],\n  podcastDir: string\n): Promise<{\n  success: boolean;\n  audioFiles?: { [key: string]: string[] };\n  individualFiles?: { [key: string]: string[] };\n  error?: string;\n}> {\n  try {\n    console.log(\"Generating batch audio with data:\", podcastData.length, \"utterances\");\n    console.log(\"Using podcast directory:\", podcastDir);\n    \n    const payload = {\n      podcast_data: podcastData,\n      podcast_dir: podcastDir\n    };\n    \n    const response = await fetch('/api/podcast/generate-batch-audio', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(payload)\n    });\n\n    if (!response.ok) {\n      throw new Error(`API call failed with status: ${response.status}`);\n    }\n\n    const data = await response.json();\n    console.log(\"Batch audio generation response:\", data);\n    \n    if (data.status_code === 0) {\n      return { \n        success: true, \n        audioFiles: data.audio_files, \n        individualFiles: data.individual_files \n      };\n    } else {\n      return { \n        success: false, \n        error: data.error || 'Failed to generate batch audio' \n      };\n    }\n  } catch (error) {\n    console.error('Error generating batch audio:', error);\n    return { \n      success: false, \n      error: error instanceof Error ? error.message : 'Unknown error occurred' \n    };\n  }\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3950, "column": 0}, "map": {"version":3,"sources":["file:///home/phucnb/Downloads/kikiPodcast/gen_podcast_v2/frontend/src/components/podcast/PodcastScript.tsx"],"sourcesContent":["// src/components/podcast/PodcastScript.tsx\n'use client';\n\nimport { useState, useEffect } from 'react';\nimport { PodcastData } from '@/types/podcast';\nimport UtteranceCard from './UtteranceCard';\nimport { generateScriptContent, createDownloadLink } from '@/lib/utils/podcast';\nimport { regenerateUtterance } from '@/lib/api/podcast';\n\ninterface PodcastScriptProps {\n  podcastData: PodcastData[];\n  audioFiles?: { [key: string]: string[] };\n  podcastDir?: string;\n  onUpdate: (index: number, newContent: string) => void;\n  onGenerateFinal: () => void;\n  loading: boolean;\n}\n\nexport default function PodcastScript({\n  podcastData,\n  audioFiles = {},\n  podcastDir = '',\n  onUpdate,\n  onGenerateFinal,\n  loading\n}: PodcastScriptProps) {\n  const [regeneratingIndex, setRegeneratingIndex] = useState<number | null>(null);\n  const [updatedAudioFiles, setUpdatedAudioFiles] = useState<{ [key: string]: string[] }>({});\n  const [directoryStatus, setDirectoryStatus] = useState<'valid' | 'invalid' | 'checking'>('checking');\n  const [error, setError] = useState<string | null>(null);\n  const [effectivePodcastDir, setEffectivePodcastDir] = useState<string>('');\n  \n  // Initialize directory once on component mount\n  useEffect(() => {\n    // Only run directory initialization logic once on mount\n    console.log(\"PodcastScript initializing with podcastDir:\", podcastDir);\n    \n    if (podcastDir && podcastDir.trim().length > 0) {\n      setDirectoryStatus('valid');\n      setEffectivePodcastDir(podcastDir);\n    } else {\n      const fallbackDir = `podcast_audio/podcast_${Date.now()}`;\n      setDirectoryStatus('valid');\n      setEffectivePodcastDir(fallbackDir);\n    }\n    \n    // Debug logging for audio files\n    if (audioFiles) {\n      console.log(\"Initial audioFiles:\", Object.keys(audioFiles).length);\n    }\n  }, []); // Empty dependency array means this only runs once on mount\n  \n  // Use the combined audio files (original + any updates)\n  const currentAudioFiles = { ...audioFiles, ...updatedAudioFiles };\n\n  const handleDownloadScript = () => {\n    const scriptContent = generateScriptContent(podcastData);\n    createDownloadLink(scriptContent, 'podcast-script.txt');\n  };\n\n  // Function to regenerate a specific utterance's audio\n  const handleRegenerateAudio = async (index: number) => {\n    if (directoryStatus !== 'valid') {\n      setError(\"Cannot regenerate audio: podcast directory not available\");\n      return;\n    }\n    \n    console.log(`Regenerating audio for utterance ${index} using directory: ${effectivePodcastDir}`);\n    setRegeneratingIndex(index);\n    setError(null);\n    \n    try {\n      // Call the API to regenerate this utterance\n      const newAudioFiles = await regenerateUtterance(podcastData, index, effectivePodcastDir);\n      \n      console.log(\"Regenerated audio files:\", newAudioFiles);\n      \n      if (newAudioFiles.length > 0) {\n        // Update the audio files for this utterance\n        setUpdatedAudioFiles(prev => ({\n          ...prev,\n          [`utterance_${index}`]: newAudioFiles\n        }));\n      } else {\n        setError(\"No audio files were returned. The regeneration may have failed.\");\n      }\n      \n      setRegeneratingIndex(null);\n    } catch (error) {\n      console.error(\"Error regenerating utterance:\", error);\n      setError(`Error regenerating audio: ${error instanceof Error ? error.message : 'Unknown error'}`);\n      setRegeneratingIndex(null);\n    }\n  };\n\n  // Check if a final generation button should be enabled\n  const isGenerateFinalEnabled = directoryStatus === 'valid' && !loading && !regeneratingIndex;\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 shadow-lg rounded-xl border border-gray-100 dark:border-gray-700 p-6 transition-all animate-fade-in\">\n      <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4\">\n        <h2 className=\"text-2xl font-bold text-gray-800 dark:text-white flex items-center\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 mr-2 text-blue-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n          </svg>\n          Podcast Script\n        </h2>\n        \n        <div className=\"flex flex-col sm:flex-row gap-3\">\n          <button\n            onClick={handleDownloadScript}\n            className=\"bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 px-4 py-2 rounded-lg font-medium focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors flex items-center justify-center gap-2 border border-gray-200 dark:border-gray-600\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\" />\n            </svg>\n            Download Script\n          </button>\n        </div>\n      </div>\n      \n      {error && (\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3 mb-4 text-red-700 dark:text-red-300 text-sm\">\n          {error}\n        </div>\n      )}\n      \n      <div className=\"space-y-4 mb-6\">\n        {podcastData.map((item, idx) => (\n          <UtteranceCard\n            key={idx}\n            item={item}\n            index={idx}\n            audioUrl={currentAudioFiles[`utterance_${idx}`]?.[0] || ''}\n            onUpdate={onUpdate}\n            onRegenerateAudio={() => handleRegenerateAudio(idx)}\n            isRegenerating={regeneratingIndex === idx}\n            disableRegeneration={directoryStatus !== 'valid'}\n          />\n        ))}\n      </div>\n      \n      <div className=\"mt-8 flex justify-center\">\n        <button\n          onClick={() => {\n            // Update parent component with the effective podcast directory\n            if (effectivePodcastDir) {\n              onGenerateFinal();\n            } else {\n              setError(\"Cannot generate final audio: No podcast directory available\");\n            }\n          }}\n          disabled={!isGenerateFinalEnabled}\n          className=\"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-3 rounded-lg font-medium hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 transition-all flex items-center justify-center gap-2 shadow-md w-full max-w-md\"\n          title={directoryStatus !== 'valid' ? \"Podcast directory not available\" : \"\"}\n        >\n          {loading ? (\n            <>\n              <svg className=\"animate-spin h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n              </svg>\n              Generating Final Podcast...\n            </>\n          ) : (\n            <>\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\" />\n              </svg>\n              Generate Final Podcast Audio\n            </>\n          )}\n        </button>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4249, "column": 0}, "map": {"version":3,"sources":["file:///home/phucnb/Downloads/kikiPodcast/gen_podcast_v2/frontend/src/components/podcast/PodcastFinal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect } from 'react';\n\ninterface PodcastFinalProps {\n  audioUrl?: string;\n}\n\nexport default function PodcastFinal({ audioUrl }: PodcastFinalProps) {\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const audioRef = useRef<HTMLAudioElement>(null);\n  const previousUrlRef = useRef(audioUrl);\n\n  useEffect(() => {\n    const audio = audioRef.current;\n    if (!audio) return;\n\n    // Only set up event handlers once\n    const handleTimeUpdate = () => {\n      setCurrentTime(audio.currentTime);\n    };\n\n    const handleDurationChange = () => {\n      setDuration(audio.duration);\n      setLoading(false);\n    };\n\n    const handleEnded = () => {\n      setIsPlaying(false);\n      setCurrentTime(0);\n      audio.currentTime = 0;\n    };\n\n    const handleCanPlay = () => {\n      setLoading(false);\n    };\n\n    audio.addEventListener('timeupdate', handleTimeUpdate);\n    audio.addEventListener('durationchange', handleDurationChange);\n    audio.addEventListener('ended', handleEnded);\n    audio.addEventListener('canplay', handleCanPlay);\n\n    return () => {\n      audio.removeEventListener('timeupdate', handleTimeUpdate);\n      audio.removeEventListener('durationchange', handleDurationChange);\n      audio.removeEventListener('ended', handleEnded);\n      audio.removeEventListener('canplay', handleCanPlay);\n    };\n  }, []); // Empty dependency array - only run once\n\n  // Handle audioUrl changes separately\n  useEffect(() => {\n    if (audioUrl !== previousUrlRef.current) {\n      setLoading(true);\n      setIsPlaying(false);\n      setCurrentTime(0);\n      previousUrlRef.current = audioUrl;\n    }\n  }, [audioUrl]);\n\n  const togglePlayPause = () => {\n    const audio = audioRef.current;\n    if (!audio || loading) return;\n\n    if (isPlaying) {\n      audio.pause();\n      setIsPlaying(false);\n    } else {\n      audio.play().then(() => {\n        setIsPlaying(true);\n      }).catch(error => {\n        console.error('Error playing audio:', error);\n      });\n    }\n  };\n\n  const handleProgressChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const audio = audioRef.current;\n    if (!audio) return;\n\n    const newTime = parseFloat(e.target.value);\n    audio.currentTime = newTime;\n    setCurrentTime(newTime);\n  };\n\n  const formatTime = (timeInSeconds: number): string => {\n    if (isNaN(timeInSeconds)) return \"0:00\";\n    const minutes = Math.floor(timeInSeconds / 60);\n    const seconds = Math.floor(timeInSeconds % 60);\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n  };\n\n  const formatDuration = (seconds: number): string => {\n    if (isNaN(seconds) || seconds === 0) return \"\";\n    \n    const minutes = Math.floor(seconds / 60);\n    const remainingSeconds = Math.floor(seconds % 60);\n    \n    return `${minutes} min ${remainingSeconds} sec`;\n  };\n\n  return (\n    <div className=\"mt-8 mb-12 bg-white dark:bg-gray-800 shadow-lg rounded-xl border border-gray-100 dark:border-gray-700 p-6 transition-all animate-fade-in\">\n      <div className=\"flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-6\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-800 dark:text-white flex items-center\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 mr-2 text-green-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n            Final Podcast\n          </h2>\n          <p className=\"text-gray-600 dark:text-gray-300 mt-1\">\n            {formatDuration(duration) ? (\n              <>Duration: <span className=\"font-medium\">{formatDuration(duration)}</span></>\n            ) : 'Your podcast has been created successfully'}\n          </p>\n        </div>\n        \n        <button\n          disabled={!audioUrl}\n          onClick={() => {\n            if (audioUrl) {\n              window.open(audioUrl, '_blank');\n            }\n          }}\n          className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 transition-colors flex items-center gap-2\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\" />\n          </svg>\n          Download Full Podcast\n        </button>\n      </div>\n      \n      <div className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-6 border border-gray-200 dark:border-gray-600\">\n        <audio ref={audioRef} src={audioUrl} className=\"hidden\" />\n        \n        <div className=\"flex items-center gap-4 mb-4\">\n          <button\n            onClick={togglePlayPause}\n            disabled={!audioUrl || loading}\n            className={`w-12 h-12 rounded-full flex items-center justify-center transition-colors ${\n              !audioUrl || loading\n                ? 'bg-gray-300 dark:bg-gray-600 cursor-not-allowed'\n                : 'bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-600'\n            } text-white focus:outline-none focus:ring-2 focus:ring-blue-500`}\n          >\n            {loading ? (\n              <svg className=\"animate-spin h-5 w-5\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n              </svg>\n            ) : isPlaying ? (\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n            ) : (\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z\" />\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n            )}\n          </button>\n          \n          <div className=\"flex-1\">\n            <div className=\"flex items-center justify-between gap-4 mb-1\">\n              <span className=\"text-sm text-gray-600 dark:text-gray-400 font-mono\">{formatTime(currentTime)}</span>\n              <span className=\"text-sm text-gray-600 dark:text-gray-400 font-mono\">{formatTime(duration)}</span>\n            </div>\n            <input\n              type=\"range\"\n              min=\"0\"\n              max={duration || 0}\n              value={currentTime}\n              onChange={handleProgressChange}\n              disabled={!audioUrl || duration === 0 || loading}\n              className={`w-full h-2 rounded-lg appearance-none cursor-pointer ${\n                !audioUrl || duration === 0 || loading\n                  ? 'bg-gray-200 dark:bg-gray-700 opacity-50'\n                  : 'bg-gray-200 dark:bg-gray-700'\n              }`}\n              style={{\n                background: audioUrl && duration > 0 && !loading\n                  ? `linear-gradient(to right, #3B82F6 0%, #3B82F6 ${(currentTime / duration) * 100}%, #E5E7EB ${(currentTime / duration) * 100}%, #E5E7EB 100%)`\n                  : undefined\n              }}\n            />\n          </div>\n        </div>\n        \n        <div className=\"flex items-center justify-center mt-4\">\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"flex flex-col items-center\">\n              <div className=\"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-blue-600 dark:text-blue-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15.465a5 5 0 001.897-7.72m-3.95 10.5a9 9 0 0111.556-1.226L9.516 23.362l-4.983-4.983z\" />\n                </svg>\n              </div>\n              <span className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">MP3</span>\n            </div>\n            \n            <div className=\"flex flex-col items-center\">\n              <div className=\"w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/50 flex items-center justify-center\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-green-600 dark:text-green-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n                </svg>\n              </div>\n              <span className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">320kbps</span>\n            </div>\n            \n            <div className=\"flex flex-col items-center\">\n              <div className=\"w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-900/50 flex items-center justify-center\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-purple-600 dark:text-purple-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n                </svg>\n              </div>\n              <span className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">Share-ready</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4804, "column": 0}, "map": {"version":3,"sources":["file:///home/phucnb/Downloads/kikiPodcast/gen_podcast_v2/frontend/src/components/ui/ErrorAlert.tsx"],"sourcesContent":["'use client';\n\ninterface ErrorAlertProps {\n  message: string;\n  onDemoMode?: () => void;\n}\n\nexport default function ErrorAlert({ message, onDemoMode }: ErrorAlertProps) {\n  return (\n    <div className=\"mb-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 shadow-sm\">\n      <div className=\"flex\">\n        <div className=\"flex-shrink-0\">\n          <svg className=\"h-5 w-5 text-red-500 dark:text-red-400\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n            <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n          </svg>\n        </div>\n        <div className=\"ml-3\">\n          <h3 className=\"text-sm font-medium text-red-800 dark:text-red-300\">Connection Error</h3>\n          <div className=\"mt-2 text-sm text-red-700 dark:text-red-300\">\n            <p>{message}</p>\n          </div>\n          {onDemoMode && (\n            <div className=\"mt-4\">\n              <button\n                onClick={onDemoMode}\n                type=\"button\"\n                className=\"inline-flex items-center rounded-md px-3 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors dark:bg-red-700 dark:hover:bg-red-600\"\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 mr-1.5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n                </svg>\n                Try Demo Mode (No backend required)\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAAA;;AAOe,SAAS,WAAW,EAAE,OAAO,EAAE,UAAU,EAAmB;IACzE,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;wBAAyC,OAAM;wBAA6B,SAAQ;wBAAY,MAAK;kCAClH,cAAA,6LAAC;4BAAK,UAAS;4BAAU,GAAE;4BAA0N,UAAS;;;;;;;;;;;;;;;;8BAGlQ,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAAqD;;;;;;sCACnE,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;0CAAG;;;;;;;;;;;wBAEL,4BACC,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCACC,SAAS;gCACT,MAAK;gCACL,WAAU;;kDAEV,6LAAC;wCAAI,OAAM;wCAA6B,WAAU;wCAAiB,MAAK;wCAAO,SAAQ;wCAAY,QAAO;kDACxG,cAAA,6LAAC;4CAAK,eAAc;4CAAQ,gBAAe;4CAAQ,aAAa;4CAAG,GAAE;;;;;;;;;;;oCACjE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAStB;KAhCwB","debugId":null}},
    {"offset": {"line": 4937, "column": 0}, "map": {"version":3,"sources":["file:///home/phucnb/Downloads/kikiPodcast/gen_podcast_v2/frontend/src/app/podcast/page.tsx"],"sourcesContent":["// src/app/podcast/page.tsx\n'use client';\n\nimport { useState, useEffect } from 'react';\nimport { PodcastData, APIResponse } from '@/types/podcast';\nimport PodcastForm, { PodcastFormData } from '@/components/podcast/PodcastForm';\nimport PodcastProgress from '@/components/podcast/PodcastProgress';\nimport PodcastScript from '@/components/podcast/PodcastScript';\nimport PodcastFinal from '@/components/podcast/PodcastFinal';\nimport ErrorAlert from '@/components/ui/ErrorAlert';\nimport { generateFullPodcastAudio, generateBatchAudio } from '@/lib/api/podcast';\n\nexport default function PodcastGenerator() {\n  const [loading, setLoading] = useState<boolean>(false);\n  const [apiResponse, setApiResponse] = useState<APIResponse | null>(null);\n  const [audioProgress, setAudioProgress] = useState<number>(0);\n  const [editedPodcastData, setEditedPodcastData] = useState<PodcastData[]>([]);\n  const [generatedFinal, setGeneratedFinal] = useState<boolean>(false);\n  const [finalAudioUrl, setFinalAudioUrl] = useState<string>('');\n  const [error, setError] = useState<string | null>(null);\n  const [podcastDir, setPodcastDir] = useState<string>('');\n\n  // Debug podcast directory changes\n  useEffect(() => {\n    if (apiResponse && apiResponse.audio_files) {\n      console.log(\"Audio files available:\", apiResponse.audio_files);\n      console.log(\"Individual files (raw):\", apiResponse.individual_files);\n    }\n  }, [apiResponse]);\n  \n  // Improved podcast directory handling\n  useEffect(() => {\n    console.log(\"Podcast directory set to:\", podcastDir);\n  }, [podcastDir]);\n  \n\n  // Helper function to convert duration string to number\n// Update this function in src/app/podcast/page.tsx to handle the new duration values\n\n// Helper function to convert duration string to number\nconst getDurationInMinutes = (durationString: string): number => {\n  switch (durationString) {\n    case 'Very Short': return 1.5;  // 1-2 minutes\n    case 'Short': return 4;         // 3-5 minutes\n    case 'Medium': return 7;        // 6-8 minutes\n    case 'Long': return 10;         // 9-12 minutes\n    default: return 4;              // Default to Short if unrecognized\n  }\n};\n\n  const handleFormSubmit = async (formData: PodcastFormData) => {\n    setLoading(true);\n    setApiResponse(null);\n    setAudioProgress(0);\n    setEditedPodcastData([]);\n    setGeneratedFinal(false);\n    setFinalAudioUrl('');\n    setError(null);\n    setPodcastDir('');\n  \n    // Enhanced payload with speaker speeds\n    const payload = {\n      input_urls: formData.urlList,\n      guidelines: formData.guidelines,\n      duration: getDurationInMinutes(formData.duration),\n      speaker_ids: formData.speakerIds,\n      podcast_type: formData.podcastType,\n      max_revisions: formData.maxRevisions,\n      speaker_profiles: formData.speakerProfiles,\n      speaker_speeds: formData.speakerSpeeds // Include speaker speeds\n    };\n  \n    try {\n      // Start progress animation for script generation (0-50%)\n      let progress = 0;\n      const interval = setInterval(() => {\n        progress += 1;\n        setAudioProgress(Math.min(progress, 45)); // Cap at 45% for script generation\n        if (progress >= 45) {\n          clearInterval(interval);\n        }\n      }, 300);\n  \n      // Make API call to backend to generate script\n      const response = await fetch('/api/podcast', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload)\n      });\n  \n      clearInterval(interval);\n      const responseData: APIResponse = await response.json();\n      console.log(\"Script generation response:\", responseData);\n      \n      if (responseData.status_code === 0) {\n        // Script generated successfully, now generate audio\n        setAudioProgress(50);\n        \n        // Create a podcast directory if one wasn't provided\n        const dirPath = responseData.podcast_dir || `podcast_audio/podcast_${Date.now()}`;\n        setPodcastDir(dirPath);\n        console.log(\"Using podcast directory:\", dirPath);\n        \n        // Prepare data for batch audio generation by adding speaker profiles with speeds\n        const podcastDataWithProfiles = responseData.data.map(item => {\n          // Find the matching speaker profile\n          const speakerProfile = formData.speakerProfiles.find(\n            profile => (item.speaker.includes(\"MC1\") && profile.id === formData.speakerIds[0]) || \n                       (item.speaker.includes(\"MC2\") && profile.id === formData.speakerIds[1])\n          );\n          \n          return {\n            ...item,\n            speakerProfile: speakerProfile || undefined\n          };\n        });\n        \n        // Generate audio for all utterances\n        const audioResult = await generateBatchAudio(podcastDataWithProfiles, dirPath);\n        \n        if (audioResult.success && audioResult.audioFiles) {\n          // Update the response with generated audio files\n          responseData.audio_files = audioResult.audioFiles;\n          responseData.individual_files = audioResult.individualFiles;\n          responseData.podcast_dir = dirPath;\n          \n          setAudioProgress(100);\n          setApiResponse(responseData);\n          setEditedPodcastData(podcastDataWithProfiles); // Use the enhanced data with profiles\n        } else {\n          setError(audioResult.error || 'Failed to generate audio for utterances');\n          setAudioProgress(100);\n          setApiResponse(responseData);\n          setEditedPodcastData(podcastDataWithProfiles); // Use the enhanced data with profiles\n        }\n      } else {\n        setApiResponse(responseData);\n        setError(responseData.error || 'An error occurred during podcast generation');\n      }\n      \n      setLoading(false);\n    } catch (error) {\n      console.error('Error generating podcast:', error);\n      setError('Failed to connect to the podcast generation service. Please check if the backend service is running.');\n      setApiResponse({\n        status_code: -1,\n        data: [],\n        error: 'Failed to generate podcast. Please try again.'\n      });\n      setLoading(false);\n    }\n  };\n\n  const updateContent = (idx: number, newContent: string) => {\n    const updatedData = [...editedPodcastData];\n    updatedData[idx].content = newContent;\n    setEditedPodcastData(updatedData);\n  };\n\n  const regenerateFullPodcast = async () => {\n    if (!podcastDir) {\n      setError(\"Cannot generate podcast: podcast directory not available\");\n      return;\n    }\n    \n    setLoading(true);\n    setAudioProgress(0);\n    setError(null);\n    try {\n      // Start progress animation\n      let progress = 0;\n      const interval = setInterval(() => {\n        progress += 3;\n        setAudioProgress(Math.min(progress, 95)); // Cap at 95% until we get the response\n        if (progress >= 95) {\n          clearInterval(interval);\n        }\n      }, 150);\n\n      // Call the API to generate the full podcast\n      const result = await generateFullPodcastAudio(editedPodcastData, podcastDir);\n      \n      clearInterval(interval);\n      setAudioProgress(100);\n      \n      if (result.success && result.audioUrl) {\n        setFinalAudioUrl(result.audioUrl);\n        setGeneratedFinal(true);\n      } else {\n        setError(result.error || 'Failed to generate final podcast audio');\n      }\n      \n      setLoading(false);\n    } catch (error) {\n      console.error('Error generating final podcast:', error);\n      setError('Failed to generate final podcast audio. Please try again.');\n      setLoading(false);\n    }\n  };\n\n  // Function to handle demo mode if needed\n  const activateDemoMode = () => {\n    // Create a simulated response with sample data\n    const demoData: PodcastData[] = [\n      { \n        speaker: \"MC1\", \n        content: \"Welcome to our podcast! Today we're discussing the fascinating world of AI and how it's transforming content creation.\",\n        speakerProfile: {\n          id: 0,\n          name: \"Mai Lan\",\n          gender: \"Female\",\n          age: 20,\n          mc_guidelines: \"+ Explanatory \\n+ Comparative\\n+ Reflective\",\n          speed: 1.0\n        }\n      },\n      { \n        speaker: \"MC2\", \n        content: \"That's right! We've seen incredible advances in machine learning that are making it possible to generate professional-sounding podcasts automatically.\",\n        speakerProfile: {\n          id: 1,\n          name: \"Minh Tú\",\n          gender: \"Male\",\n          age: 30,\n          mc_guidelines: \"+ Formal \\n+ Informative \\n+ Descriptive \\n+ Objective\",\n          speed: 1.0\n        }\n      },\n      { \n        speaker: \"MC1\", \n        content: \"Exactly. What's most impressive is how natural the conversations can sound, with proper intonation and emphasis.\",\n        speakerProfile: {\n          id: 0,\n          name: \"Mai Lan\",\n          gender: \"Female\",\n          age: 20,\n          mc_guidelines: \"+ Explanatory \\n+ Comparative\\n+ Reflective\",\n          speed: 1.0\n        }\n      }\n    ];\n    \n    // Create simulated audio files that match your API's format\n    // For each utterance, we'll have a single audio file\n    const demoIndividualFiles = {\n      \"MC1_0\": [\"/demo/mc1_0_0.wav\"], \n      \"MC2_1\": [\"/demo/mc2_1_0.wav\"],\n      \"MC1_2\": [\"/demo/mc1_2_0.wav\"] \n    };\n    \n    // Now convert to the expected format for our components\n    const demoAudioFiles = {\n      \"utterance_0\": demoIndividualFiles[\"MC1_0\"],\n      \"utterance_1\": demoIndividualFiles[\"MC2_1\"],\n      \"utterance_2\": demoIndividualFiles[\"MC1_2\"]\n    };\n    \n    // Important: Set the podcast directory for demo mode\n    const demoPodcastDir = \"demo_podcast_dir\";\n    setPodcastDir(demoPodcastDir);\n    console.log(\"Setting demo podcast directory:\", demoPodcastDir);\n    \n    setApiResponse({\n      status_code: 0,\n      data: demoData,\n      individual_files: demoIndividualFiles,\n      audio_files: demoAudioFiles,\n      podcast_dir: demoPodcastDir\n    });\n    \n    setEditedPodcastData(demoData);\n    setError(null);\n  };\n\n  return (\n    <div className=\"max-w-6xl mx-auto p-4 md:p-8 pt-12\">\n      \n      {error && (\n        <ErrorAlert \n          message={error} \n          onDemoMode={activateDemoMode} \n        />\n      )}\n      \n      <PodcastForm \n        onSubmit={handleFormSubmit}\n        loading={loading}\n      />\n\n      {loading && (\n        <PodcastProgress progress={audioProgress} />\n      )}\n\n      {apiResponse && (\n        <div className=\"mt-8 space-y-8\">\n          {apiResponse.status_code === 0 ? (\n            <div className=\"bg-green-50 dark:bg-green-900/30 p-4 rounded-lg border border-green-200 dark:border-green-800 flex items-center gap-3\">\n              <div className=\"bg-green-100 dark:bg-green-800 rounded-full p-1\">\n                <svg className=\"h-5 w-5 text-green-600 dark:text-green-400\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden=\"true\">\n                  <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                </svg>\n              </div>\n              <p className=\"text-green-700 dark:text-green-300 font-medium\">Podcast generated successfully!</p>\n            </div>\n          ) : (\n            <div className=\"bg-yellow-50 dark:bg-yellow-900/30 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800 flex items-center gap-3\">\n              <div className=\"bg-yellow-100 dark:bg-yellow-800 rounded-full p-1\">\n                <svg className=\"h-5 w-5 text-yellow-600 dark:text-yellow-400\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden=\"true\">\n                  <path fillRule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n                </svg>\n              </div>\n              <div>\n                <p className=\"text-yellow-700 dark:text-yellow-300 font-medium\">Status Code: {apiResponse.status_code}</p>\n                {apiResponse.error && <p className=\"text-red-600 dark:text-red-400 mt-1\">{apiResponse.error}</p>}\n              </div>\n            </div>\n          )}\n\n          {editedPodcastData.length > 0 && (\n            <>\n              <PodcastScript \n                podcastData={editedPodcastData}\n                audioFiles={apiResponse.audio_files}\n                podcastDir={podcastDir} // Pass the podcast directory here\n                onUpdate={updateContent}\n                onGenerateFinal={regenerateFullPodcast}\n                loading={loading}\n              />\n              \n              {generatedFinal && (\n                <PodcastFinal audioUrl={finalAudioUrl} />\n              )}\n            </>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}